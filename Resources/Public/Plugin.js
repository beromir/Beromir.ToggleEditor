(()=>{var oe=Object.create;var xt=Object.defineProperty;var ie=Object.getOwnPropertyDescriptor;var le=Object.getOwnPropertyNames;var ae=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty;var ne=(t,e)=>()=>(t&&(e=t(t=0)),e);var R=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ge=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of le(e))!se.call(t,l)&&l!==r&&xt(t,l,{get:()=>e[l],enumerable:!(o=ie(e,l))||o.enumerable});return t};var X=(t,e,r)=>(r=t!=null?oe(ae(t)):{},ge(e||!t||!t.__esModule?xt(r,"default",{value:t,enumerable:!0}):r,t));function O(t){return(...e)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...e);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var H=ne(()=>{});var L=R((je,Xt)=>{H();Xt.exports=O("vendor")().React});var Bt=R((Ue,Ot)=>{H();Ot.exports=O("vendor")().PropTypes});var Wt=R((Te,vt)=>{H();vt.exports=O("NeosProjectPackages")().NeosUiReduxStore});var lt=R((Ke,wt)=>{H();wt.exports=O("NeosProjectPackages")().NeosUiDecorators});var zt=R(($e,Zt)=>{H();Zt.exports=O("vendor")().reactRedux});var at=R((ir,Ht)=>{H();Ht.exports=O("NeosProjectPackages")().ReactUiComponents});H();var ce=(t,e="position",r="key")=>{let o=typeof e=="string"?c=>c[e]:e,l={},g={},u={},m={},f={},A={};t.forEach((c,C)=>{let I=c[r]?c[r]:String(C);l[I]=C;let W=o(c),x=String(W||C),Y=!1;if(x.startsWith("start")){let b=x.match(/start\s+(\d+)/),G=b&&b[1]?Number(b[1]):0;u[G]||(u[G]=[]),u[G].push(I)}else if(x.startsWith("end")){let b=x.match(/end\s+(\d+)/),G=b&&b[1]?Number(b[1]):0;m[G]||(m[G]=[]),m[G].push(I)}else if(x.startsWith("before")){let b=x.match(/before\s+(\S+)(\s+(\d+))?/);if(!b)Y=!0;else{let G=b[1],w=b[3]?Number(b[3]):0;f[G]||(f[G]={}),f[G][w]||(f[G][w]=[]),f[G][w].push(I)}}else if(x.startsWith("after")){let b=x.match(/after\s+(\S+)(\s+(\d+))?/);if(!b)Y=!0;else{let G=b[1],w=b[3]?Number(b[3]):0;A[G]||(A[G]={}),A[G][w]||(A[G][w]=[]),A[G][w].push(I)}}else Y=!0;if(Y){let b=parseFloat(x);(isNaN(b)||!isFinite(b))&&(b=C),g[b]||(g[b]=[]),g[b].push(I)}});let z=[],F=[],v=[],q=[],Z=(c,C)=>{let I=Object.keys(c).map(W=>Number(W)).sort((W,x)=>W-x);return C?I:I.reverse()},h=(c,C)=>{c.forEach(I=>{if(!(q.indexOf(I)>=0)){if(q.push(I),f[I]){let W=Z(f[I],!0);for(let x of W)h(f[I][x],C)}if(C.push(I),A[I]){let W=Z(A[I],!1);for(let x of W)h(A[I][x],C)}}})};for(let c of Z(u,!1))h(u[c],z);for(let c of Z(g,!0))h(g[c],F);for(let c of Z(m,!0))h(m[c],v);for(let c of Object.keys(f))if(!(q.indexOf(c)>=0))for(let C of Z(f[c],!1))h(f[c][C],z);for(let c of Object.keys(A))if(!(q.indexOf(c)>=0))for(let C of Z(A[c],!1))h(A[c][C],F);return[...z,...F,...v].map(c=>l[c]).map(c=>t[c])},ut=ce;var ht=O("manifest");var n=X(L()),a=X(Bt()),Dt=X(Wt()),jt=X(lt());var Mt=X(zt());var k=X(L());var V=X(L());function Nt({style:t,className:e,size:r=30}){return V.default.createElement("svg",{width:r,height:r,stroke:"currentColor",viewBox:"0 0 24 24",style:t,className:e},V.default.createElement("g",null,V.default.createElement("circle",{cx:"12",cy:"12",r:"9.5",fill:"none","stroke-width":"2","stroke-linecap":"round"},[{attribute:"dasharray",values:"0 150;42 150;42 150;42 150"},{attribute:"dashoffset",values:"0;-16;-59;-59"}].map(({attribute:o,values:l})=>V.default.createElement("animate",{key:o,attributeName:`stroke-${o}`,values:l,dur:"1.5s",calcMode:"spline",keyTimes:"0;0.475;0.95;1",keySplines:"0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1",repeatCount:"indefinite"}))),V.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"2s",values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}function Vt({style:t,className:e,size:r=30}){return V.default.createElement("svg",{width:r*2,height:r,viewBox:"0 0 24 12",class:e,style:t},[1,2,3].map(o=>{let l=o*6,g=Math.round(100/3*(o-1))/100;return V.default.createElement("circle",{cx:l,cy:"6",r:"0",fill:"currentColor"},V.default.createElement("animate",{attributeName:"r",begin:g,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"}))}))}var Ft=X(lt()),mt={container:(t=1)=>({display:"grid",gridTemplate:"'content' 1fr / 1fr",alignItems:"center",justifyItems:"center",width:"100%",minHeight:`calc(var(--spacing-GoldenUnit) * ${t})`}),item:(t=!1)=>({gridArea:"content",transition:"opacity var(--transition-Default), transform var(--transition-Default) ease",opacity:t?1:0,transform:`scale(${t?1:0})`})};function be({id:t,title:e="Neos.Neos:Main:loading",isLoading:r=!1,delayTime:o=500,timeoutTime:l=5e3,i18nRegistry:g,heightMultiplier:u=1,width:m=60}){let[f,A]=(0,k.useState)(0),z=e?g.translate(e):null;return(0,k.useEffect)(()=>{if(!r){A(0);return}let F=setTimeout(()=>{A(1)},o),v=setTimeout(()=>{A(2)},o+l);return()=>{clearTimeout(F),clearTimeout(v)}},[r]),r?k.default.createElement("div",{id:t,style:mt.container(u),title:z},k.default.createElement(Nt,{size:m/2,style:mt.item(f==1)}),k.default.createElement(Vt,{size:m/2,style:mt.item(f==2)})):null}var ue=(0,Ft.neos)(t=>({i18nRegistry:t.get("i18n")})),Yt=ue(be);var S=X(at());var D=X(L()),_=X(at());var s={allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",colorPreviewLast:"beromir-toggleeditor-blateq-colorPreviewLast","flex-start":"beromir-toggleeditor-blateq-flex-start",highlight:"beromir-toggleeditor-blateq-highlight",colorBox:"beromir-toggleeditor-blateq-colorBox",colorPreview:"beromir-toggleeditor-blateq-colorPreview",flex:"beromir-toggleeditor-blateq-flex",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",wrapper:"beromir-toggleeditor-blateq-wrapper",flex1:"beromir-toggleeditor-blateq-flex1",disabled:"beromir-toggleeditor-blateq-disabled",color:"beromir-toggleeditor-blateq-color",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",content:"beromir-toggleeditor-blateq-content",listButton:"beromir-toggleeditor-blateq-listButton",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",imageSVG:"beromir-toggleeditor-blateq-imageSVG",colorButton:"beromir-toggleeditor-blateq-colorButton",error:"beromir-toggleeditor-blateq-error",list:"beromir-toggleeditor-blateq-list",image:"beromir-toggleeditor-blateq-image",layered:"beromir-toggleeditor-blateq-layered",grid:"beromir-toggleeditor-blateq-grid",label:"beromir-toggleeditor-blateq-label",transition:"beromir-toggleeditor-blateq-transition",imageFull:"beromir-toggleeditor-blateq-imageFull",button:"beromir-toggleeditor-blateq-button",radio:"beromir-toggleeditor-blateq-radio",selected:"beromir-toggleeditor-blateq-selected"};function Lt(t){var e,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(r=Lt(t[e]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function me(){for(var t,e,r=0,o="",l=arguments.length;r<l;r++)(t=arguments[r])&&(e=Lt(t))&&(o&&(o+=" "),o+=e);return o}var B=me;var kt=t=>qt("preview",t),St=t=>qt("icon",t);function J(t,e,r=!1,o=g=>g,l=""){let g=`${e}Active${l}`,u=t[e+l],m=t[g];return r&&m===void 0&&(m=u),u==null&&m==null?null:{default:o(u),active:o(m)}}function Jt(t,e){if(!t||typeof t!="object")return[];let r=[];for(let o in t){let l=t[o];l.hidden||r.push({...l,value:o,key:o==""?"__empty__":o})}return e==="color"?It(r):r}function It(t){return Array.isArray(t)?(t=t.map(e=>({...e,color:Ie(e.color)})).filter(e=>e.color),t):[]}function Ie(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function qt(t,e){if(!e)return null;let r=J(e,t);if(!r)return null;let o=r.default&&r.active,l=J(e,t,!0,m=>`rotate(${m||0}deg)`,"Rotate"),g=J("label",t,!0),u=J("description",!0);return{type:t,needLayering:o,state:r,label:g,description:u,rotate:l}}function j({item:t,size:e,isCurrent:r}){let o=St(t);if(!o)return null;let{state:l,rotate:g,needLayering:u}=o;return u?D.default.createElement("span",{className:s.layered},D.default.createElement(_.Icon,{icon:l.default,className:s.transition,style:{opacity:r?0:1,transform:g?.default},size:e}),D.default.createElement(_.Icon,{icon:l.active,className:s.transition,style:{opacity:r?1:0,transform:g?.active},size:e})):l.default?D.default.createElement(_.Icon,{icon:l.default,className:s.transition,style:{transform:r?g?.active:g?.default},size:e}):l.active&&r?D.default.createElement(_.Icon,{icon:l.active,style:{transform:g?.active},size:e}):null}var M=X(L());var pt=X(L()),Qt=X(lt());var pe=(0,Qt.neos)(t=>({i18nRegistry:t.get("i18n")})),$=pe(fe);function fe({src:t,className:e,style:r,label:o,i18nRegistry:l}){let g=l.translate(o);return t.startsWith("<svg ")?pt.default.createElement("div",{className:B(s.transition,s.imageSVG,e),style:r,"aria-label":g,dangerouslySetInnerHTML:{__html:t}}):pt.default.createElement("img",{className:B(s.transition,s.image,e),style:r,alt:g,src:t.startsWith("resource://")?`/_Resources/Static/Packages/${t.substr(11)}`:t})}function U({item:t,isCurrent:e}){let r=kt(t);if(!r)return null;let{state:o,rotate:l,needLayering:g,label:u,description:m}=r,f=t.previewFull?s.imageFull:null;return r.needLayering?M.default.createElement("span",{className:s.layered},M.default.createElement($,{src:o.default,className:f,style:{opacity:e?0:1,transform:l?.default},label:m?.default||u?.default}),M.default.createElement($,{src:o.active,className:f,style:{opacity:e?1:0,transform:l?.active},label:m?.active||u?.active})):o.default?M.default.createElement($,{src:o.default,className:f,style:{transform:e?l?.active:l?.default},label:m?.default||u?.default}):o.active&&e?M.default.createElement($,{src:o.active,className:f,style:{transform:l?.active},label:m?.active||u?.active}):null}var tt=X(L()),Rt=X(at());function E({children:t,label:e,id:r,className:o,title:l,style:g,renderHelpIcon:u}){return t?tt.default.createElement(tt.default.Fragment,null,e&&tt.default.createElement(Rt.Label,{htmlFor:r},e," ",u()),tt.default.createElement("div",{id:r,className:B(s.wrapper,o),style:g,title:l},t)):null}var Ce=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),Ge={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,emptyValue:"",multiple:!1,iconSize:null,disabled:!1,hidden:!1,dataSourceIdentifier:null,dataSourceUri:null,labelCustomStyle:null};function Ut(t){let e={...Ge,...t.options},{layout:r,values:o,columns:l,maximalColumns:g,emptyValue:u,iconSize:m,disabled:f,dataSourceIdentifier:A,dataSourceUri:z,dataSourceAdditionalData:F,multiple:v,labelCustomStyle:q}=e,Z=v||e.allowEmpty,{value:h,commit:st,highlight:c,i18nRegistry:C,id:I,dataSourcesDataLoader:W,renderHelpIcon:x}=t,Y=C.translate(t.label),[b,G]=(0,n.useState)([]);(0,n.useEffect)(()=>{c||G(Array.isArray(h)?h:[h])},[c]),v&&!Array.isArray(h)&&console.warn(`Misconfiguration in property "${t.identifier}". Multiple is activated but value type seems to be "string" but should be "array".`);let w=!!(A||z),[ft,Tt]=(0,n.useState)(w),[T,nt]=(0,n.useState)(w?[]:Jt(o,r,C)),[et,Ct]=(0,n.useState)(Array.isArray(h)?h:[h]),[Pt,Kt]=(0,n.useState)(null);if((0,n.useEffect)(()=>{let i=JSON.stringify({dataSourceIdentifier:A,dataSourceUri:z,dataSourceAdditionalData:F});!w||Pt===i||(Kt(i),W.resolveValue(Ce(t),h).then(p=>{if(Tt(!1),p.hidden){nt({hidden:!0});return}if(p=p.map(d=>({key:d.value==""?"__empty__":d.value,...d})),r==="color"){nt(It(p));return}nt(p)}))},[A,z,F]),ft)return n.default.createElement(E,{id:I,label:Y,renderHelpIcon:x},n.default.createElement(Yt,{isLoading:ft,title:"Beromir.ToggleEditor:Main:loading"}));if(T.hidden)return null;if(!T||!T.length)return n.default.createElement(E,{id:I,label:Y,className:s.error,renderHelpIcon:x},C.translate(`Beromir.ToggleEditor:Main:error.${w?"noDataFromSource":"noNodeTypeDefintion"}`));function _t(i){if(JSON.stringify(et)===JSON.stringify(b))return!1;let p=b.includes(i.value);if(!et.length)return p;let d=gt(i);return v?d&&!p||p&&!d:d}function gt(i){return et.includes(i.value)}function rt(i,p){if(p&&p.blur(),!i){st(v?[]:u),Ct([]);return}let d=i.value,y=[...et],P=y.includes(d);v?P?y.splice(y.indexOf(d),1):y.push(d):y=P?[]:[d],!(!Z&&y.length===0)&&(Ct(y),v||(y=y[0]||u),st(y))}let Gt=(i,p=0)=>{if(typeof i=="number"&&i>0)return i;let d=T.length||1;if(!i||typeof i!="string")return d;try{return i=i.replaceAll("{items}",d),p&&(i=i.replaceAll("{maximalColumns}",d)),new Function(`return Math.floor(${i})`)()}catch(y){console.warn('An error occurred while trying to evaluate "'+i+`"
`,y)}},$t=()=>{let i=Gt(l,g),p=Gt(g);return{"--columns":Math.min(i,p)}},te=C.translate("Beromir.ToggleEditor:Main:reset"),ct=({item:i,className:p=s.allowEmpty})=>Z&&!v?n.default.createElement("span",{className:B(p,gt(i)&&s.allowEmptyShow)},n.default.createElement(S.Icon,{size:"sm",icon:"times"})):null;return n.default.createElement(E,{id:I,label:Y,className:[s[r],f&&s.disabled],style:$t(),renderHelpIcon:x},ut(T).map((i,p)=>{let d=gt(i),y=i.disabled,P=d?"active":"default",ee=J(i,"label",!0,K=>C.translate(K)),re=J(i,"description",!0,K=>C.translate(K)),N=ee?.[P],dt=re?.[P],bt=dt||N,ot=d&&Z?te:bt,it=_t(i)&&s.highlight;switch(r){case"list":return v?n.default.createElement(S.Label,{className:B(s.listButton,it),title:dt,"aria-label":ot,key:`list-multiple-${p}`},n.default.createElement(S.CheckBox,{isChecked:d,disabled:y,onChange:()=>rt(i)}),n.default.createElement(j,{item:i,isCurrent:d,size:m}),n.default.createElement(U,{item:i,isCurrent:d}),N&&n.default.createElement("span",{className:s.flex1},N)):n.default.createElement("button",{onClick:({currentTarget:Q})=>rt(i,Q),type:"button",title:dt,"aria-label":ot,disabled:y,className:B(s.listButton,d&&s.selected,it),key:`list-single-${p}`},n.default.createElement("span",{className:s.radio},n.default.createElement("span",null)),n.default.createElement(j,{item:i,isCurrent:d,size:m}),n.default.createElement(U,{item:i,isCurrent:d}),N&&n.default.createElement("span",{className:s.flex1},N),n.default.createElement(ct,{item:i,className:s.allowEmptyRadio}));case"color":let K=i.color.length-1;return n.default.createElement("div",{className:s.colorBox,key:`color-${p}`},n.default.createElement("button",{onClick:({currentTarget:Q})=>rt(i,Q),type:"button",title:bt,"aria-label":ot,disabled:y,className:B(s.colorButton,d&&s.selected,it)},i.color.map((Q,At)=>n.default.createElement("span",{key:`color-${At}`,className:B(s.colorPreview,Q==="transparent"&&s.colorTransparent,K===At&&s.colorPreviewLast),style:{backgroundColor:Q}})),n.default.createElement(ct,{item:i})),N&&n.default.createElement("span",{className:B(s.label,y&&s.disabled)},N));default:return n.default.createElement(S.Button,{onClick:()=>rt(i),isActive:d,title:bt,"aria-label":ot,disabled:y,className:B(s.button,it),key:`default-${p}`},n.default.createElement(j,{item:i,isCurrent:d,size:m}),n.default.createElement(U,{item:i,isCurrent:d}),N&&n.default.createElement("span",{className:B(i.icon||i.preview?s.label:null),style:i.labelCustomStyle||q||{}},N),n.default.createElement(ct,{item:i}))}}))}Ut.propTypes={value:a.default.string,commit:a.default.func.isRequired,i18nRegistry:a.default.object.isRequired,options:a.default.shape({layout:a.default.oneOf(["grid","flex","flex-start","list","color"]),columns:a.default.oneOfType([a.default.string,a.default.number]),maximalColumns:a.default.oneOfType([a.default.string,a.default.number]),allowEmpty:a.default.bool,emptyValue:a.default.string,multiple:a.default.bool,iconSize:a.default.oneOf(["xs","sm","lg","2x","3x"]),labelCustomStyle:a.default.objectOf(a.default.oneOfType([a.default.string,a.default.number])),values:a.default.objectOf(a.default.shape({label:a.default.string,labelCustomStyle:a.default.objectOf(a.default.oneOfType([a.default.string,a.default.number])),icon:a.default.string,iconRotate:a.default.number,description:a.default.string,color:a.default.oneOfType([a.default.string,a.default.arrayOf(a.default.string)]),hidden:a.default.bool,preview:a.default.string,previewFull:a.default.bool,disabled:a.default.bool})),dataSourceIdentifier:a.default.string,dataSourceUri:a.default.string,dataSourceDisableCaching:a.default.bool,dataSourceAdditionalData:a.default.objectOf(a.default.any)}).isRequired};var Ae=(0,jt.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),xe=(0,Mt.connect)(t=>({focusedNodePath:Dt.selectors.CR.Nodes.focusedNodePathSelector(t)})),Et=Ae(xe(Ut));ht("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:Et,hasOwnLabel:!0})});})();
//# sourceMappingURL=Plugin.js.map
