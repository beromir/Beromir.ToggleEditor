(()=>{var Kt=Object.create;var ft=Object.defineProperty;var _t=Object.getOwnPropertyDescriptor;var $t=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,ee=Object.prototype.hasOwnProperty;var re=(t,e)=>()=>(t&&(e=t(t=0)),e);var J=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var oe=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $t(e))!ee.call(t,i)&&i!==r&&ft(t,i,{get:()=>e[i],enumerable:!(o=_t(e,i))||o.enumerable});return t};var x=(t,e,r)=>(r=t!=null?Kt(te(t)):{},oe(e||!t||!t.__esModule?ft(r,"default",{value:t,enumerable:!0}):r,t));function X(t){return(...e)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...e);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var k=re(()=>{});var Y=J((Qe,Gt)=>{k();Gt.exports=X("vendor")().React});var ht=J((je,yt)=>{k();yt.exports=X("vendor")().PropTypes});var Xt=J((Re,xt)=>{k();xt.exports=X("NeosProjectPackages")().NeosUiReduxStore});var it=J((Ue,Bt)=>{k();Bt.exports=X("NeosProjectPackages")().NeosUiDecorators});var vt=J((Te,Ot)=>{k();Ot.exports=X("vendor")().reactRedux});var lt=J(($e,Nt)=>{k();Nt.exports=X("NeosProjectPackages")().ReactUiComponents});k();var ie=(t,e="position",r="key")=>{let o=typeof e=="string"?g=>g[e]:e,i={},c={},u={},m={},p={},h={};t.forEach((g,y)=>{let I=g[r]?g[r]:String(y);i[I]=y;let B=o(g),C=String(B||y),N=!1;if(C.startsWith("start")){let d=C.match(/start\s+(\d+)/),f=d&&d[1]?Number(d[1]):0;u[f]||(u[f]=[]),u[f].push(I)}else if(C.startsWith("end")){let d=C.match(/end\s+(\d+)/),f=d&&d[1]?Number(d[1]):0;m[f]||(m[f]=[]),m[f].push(I)}else if(C.startsWith("before")){let d=C.match(/before\s+(\S+)(\s+(\d+))?/);if(!d)N=!0;else{let f=d[1],Z=d[3]?Number(d[3]):0;p[f]||(p[f]={}),p[f][Z]||(p[f][Z]=[]),p[f][Z].push(I)}}else if(C.startsWith("after")){let d=C.match(/after\s+(\S+)(\s+(\d+))?/);if(!d)N=!0;else{let f=d[1],Z=d[3]?Number(d[3]):0;h[f]||(h[f]={}),h[f][Z]||(h[f][Z]=[]),h[f][Z].push(I)}}else N=!0;if(N){let d=parseFloat(C);(isNaN(d)||!isFinite(d))&&(d=y),c[d]||(c[d]=[]),c[d].push(I)}});let F=[],H=[],w=[],V=[],v=(g,y)=>{let I=Object.keys(g).map(B=>Number(B)).sort((B,C)=>B-C);return y?I:I.reverse()},W=(g,y)=>{g.forEach(I=>{if(!(V.indexOf(I)>=0)){if(V.push(I),p[I]){let B=v(p[I],!0);for(let C of B)W(p[I][C],y)}if(y.push(I),h[I]){let B=v(h[I],!1);for(let C of B)W(h[I][C],y)}}})};for(let g of v(u,!1))W(u[g],F);for(let g of v(c,!0))W(c[g],H);for(let g of v(m,!0))W(m[g],w);for(let g of Object.keys(p))if(!(V.indexOf(g)>=0))for(let y of v(p[g],!1))W(p[g][y],F);for(let g of Object.keys(h))if(!(V.indexOf(g)>=0))for(let y of v(h[g],!1))W(h[g][y],H);return[...F,...H,...w].map(g=>i[g]).map(g=>t[g])},st=ie;var At=X("manifest");var n=x(Y()),s=x(ht()),Qt=x(Xt()),qt=x(it());var jt=x(vt());var S=x(Y());var L=x(Y());function Zt({style:t,className:e,size:r=30}){return L.default.createElement("svg",{width:r,height:r,stroke:"currentColor",viewBox:"0 0 24 24",style:t,className:e},L.default.createElement("g",null,L.default.createElement("circle",{cx:"12",cy:"12",r:"9.5",fill:"none","stroke-width":"2","stroke-linecap":"round"},[{attribute:"dasharray",values:"0 150;42 150;42 150;42 150"},{attribute:"dashoffset",values:"0;-16;-59;-59"}].map(({attribute:o,values:i})=>L.default.createElement("animate",{key:o,attributeName:`stroke-${o}`,values:i,dur:"1.5s",calcMode:"spline",keyTimes:"0;0.475;0.95;1",keySplines:"0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1",repeatCount:"indefinite"}))),L.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"2s",values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}function wt({style:t,className:e,size:r=30}){return L.default.createElement("svg",{width:r*2,height:r,viewBox:"0 0 24 12",class:e,style:t},[1,2,3].map(o=>{let i=o*6,c=Math.round(100/3*(o-1))/100;return L.default.createElement("circle",{cx:i,cy:"6",r:"0",fill:"currentColor"},L.default.createElement("animate",{attributeName:"r",begin:c,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"}))}))}var Wt=x(it()),gt={container:(t=1)=>({display:"grid",gridTemplate:"'content' 1fr / 1fr",alignItems:"center",justifyItems:"center",width:"100%",minHeight:`calc(var(--spacing-GoldenUnit) * ${t})`}),item:(t=!1)=>({gridArea:"content",transition:"opacity var(--transition-Default), transform var(--transition-Default) ease",opacity:t?1:0,transform:`scale(${t?1:0})`})};function ae({id:t,title:e="Neos.Neos:Main:loading",isLoading:r=!1,delayTime:o=500,timeoutTime:i=5e3,i18nRegistry:c,heightMultiplier:u=1}){let[m,p]=(0,S.useState)(0),h=e?c.translate(e):null;return(0,S.useEffect)(()=>{if(!r){p(0);return}let F=setTimeout(()=>{p(1)},o),H=setTimeout(()=>{p(2)},o+i);return()=>{clearTimeout(F),clearTimeout(H)}},[r]),r?S.default.createElement("div",{id:t,style:gt.container(u),title:h},S.default.createElement(Zt,{style:gt.item(m==1)}),S.default.createElement(wt,{style:gt.item(m==2)})):null}var ne=(0,Wt.neos)(t=>({i18nRegistry:t.get("i18n")})),Ft=ne(ae);var Q=x(lt());var R=x(Y()),_=x(lt());var a={color:"beromir-toggleeditor-blateq-color",imageSVG:"beromir-toggleeditor-blateq-imageSVG",content:"beromir-toggleeditor-blateq-content","flex-start":"beromir-toggleeditor-blateq-flex-start",layered:"beromir-toggleeditor-blateq-layered",radio:"beromir-toggleeditor-blateq-radio",colorPreview:"beromir-toggleeditor-blateq-colorPreview",button:"beromir-toggleeditor-blateq-button",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",selected:"beromir-toggleeditor-blateq-selected",listButton:"beromir-toggleeditor-blateq-listButton",disabled:"beromir-toggleeditor-blateq-disabled",colorPreviewLast:"beromir-toggleeditor-blateq-colorPreviewLast",image:"beromir-toggleeditor-blateq-image",colorButton:"beromir-toggleeditor-blateq-colorButton",wrapper:"beromir-toggleeditor-blateq-wrapper",label:"beromir-toggleeditor-blateq-label",grid:"beromir-toggleeditor-blateq-grid",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",highlight:"beromir-toggleeditor-blateq-highlight",imageFull:"beromir-toggleeditor-blateq-imageFull",transition:"beromir-toggleeditor-blateq-transition",error:"beromir-toggleeditor-blateq-error",flex:"beromir-toggleeditor-blateq-flex",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",colorBox:"beromir-toggleeditor-blateq-colorBox",list:"beromir-toggleeditor-blateq-list"};function zt(t){var e,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=zt(t[e]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function se(){for(var t,e,r=0,o="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=zt(t))&&(o&&(o+=" "),o+=e);return o}var O=se;var Lt=t=>kt("preview",t),Ht=t=>kt("icon",t);function q(t,e,r=!1,o=c=>c,i=""){let c=`${e}Active${i}`,u=t[e+i],m=t[c];return r&&m===void 0&&(m=u),u==null&&m==null?null:{default:o(u),active:o(m)}}function Vt(t,e){if(!t||typeof t!="object")return[];let r=[];for(let o in t){let i=t[o];i.hidden||r.push({...i,value:o,key:o==""?"__empty__":o})}return e==="color"?ct(r):r}function ct(t){return Array.isArray(t)?(t=t.map(e=>({...e,color:ge(e.color)})).filter(e=>e.color),t):[]}function ge(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function kt(t,e){if(!e)return null;let r=q(e,t);if(!r)return null;let o=r.default&&r.active,i=q(e,t,!0,m=>`rotate(${m||0}deg)`,"Rotate"),c=q("label",t,!0),u=q("description",!0);return{type:t,needLayering:o,state:r,label:c,description:u,rotate:i}}function D({item:t,size:e,isCurrent:r}){let o=Ht(t);if(!o)return null;let{state:i,rotate:c,needLayering:u}=o;return u?R.default.createElement("span",{className:a.layered},R.default.createElement(_.Icon,{icon:i.default,className:a.transition,style:{opacity:r?0:1,transform:c?.default},size:e}),R.default.createElement(_.Icon,{icon:i.active,className:a.transition,style:{opacity:r?1:0,transform:c?.active},size:e})):i.default?R.default.createElement(_.Icon,{icon:i.default,className:a.transition,style:{transform:r?c?.active:c?.default},size:e}):i.active&&r?R.default.createElement(_.Icon,{icon:i.active,style:{transform:c?.active},size:e}):null}var U=x(Y());var dt=x(Y()),Yt=x(it());var ce=(0,Yt.neos)(t=>({i18nRegistry:t.get("i18n")})),$=ce(de);function de({src:t,className:e,style:r,label:o,i18nRegistry:i}){let c=i.translate(o);return t.startsWith("<svg ")?dt.default.createElement("div",{className:O(r.imageSVG,e),style:r,"aria-label":c,dangerouslySetInnerHTML:{__html:t}}):dt.default.createElement("img",{className:O(r.image,e),style:r,alt:c,src:t.startsWith("resource://")?`/_Resources/Static/Packages/${t.substr(11)}`:t})}function M({item:t,isCurrent:e}){let r=Lt(t);if(!r)return null;let{state:o,rotate:i,needLayering:c,label:u,description:m}=r,p=t.previewFull?a.imageFull:null;return r.needLayering?U.default.createElement("span",{className:a.layered},U.default.createElement($,{src:o.default,className:[a.transition,p],style:{opacity:e?0:1,transform:i?.default},label:m?.default||u?.default}),U.default.createElement($,{src:o.active,className:[a.transition,p],style:{opacity:e?1:0,transform:i?.active},label:m?.active||u?.active})):o.default?U.default.createElement($,{src:o.default,className:[a.transition,p],style:{transform:e?i?.active:i?.default},label:m?.default||u?.default}):o.active&&e?U.default.createElement($,{src:o.active,className:[a.transition,p],style:{transform:i?.active},label:m?.active||u?.active}):null}var tt=x(Y()),St=x(lt());function T({children:t,label:e,id:r,className:o,title:i,style:c,renderHelpIcon:u}){return t?tt.default.createElement(tt.default.Fragment,null,e&&tt.default.createElement(St.Label,{htmlFor:r},e," ",u()),tt.default.createElement("div",{id:r,className:O(a.wrapper,o),style:c,title:i},t)):null}var be=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),ue={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,emptyValue:"",multiple:!1,iconSize:null,disabled:!1,hidden:!1,dataSourceIdentifier:null,dataSourceUri:null};function Jt(t){let e={...ue,...t.options},{layout:r,values:o,columns:i,maximalColumns:c,emptyValue:u,iconSize:m,disabled:p,dataSourceIdentifier:h,dataSourceUri:F,dataSourceAdditionalData:H,multiple:w}=e,V=w||e.allowEmpty,{value:v,commit:W,highlight:et,i18nRegistry:g,id:y,dataSourcesDataLoader:I,renderHelpIcon:B}=t,C=g.translate(t.label);w&&!Array.isArray(v)&&console.warn(`Misconfiguration in property "${t.identifier}". Multiple is activated but value type seems to be "string" but should be "array".`);let N=!!(h||F),[d,f]=(0,n.useState)(N),[Z,at]=(0,n.useState)(N?[]:Vt(o,r,g)),[bt,ut]=(0,n.useState)(Array.isArray(v)?v:[v]),[Dt,Ut]=(0,n.useState)(null);if((0,n.useEffect)(()=>{let l=JSON.stringify({dataSourceIdentifier:h,dataSourceUri:F,dataSourceAdditionalData:H});!N||Dt===l||(Ut(l),I.resolveValue(be(t),v).then(A=>{if(f(!1),A.hidden){at({hidden:!0});return}if(A=A.map(b=>({key:b.value==""?"__empty__":b.value,...b})),r==="color"){at(ct(A));return}at(A)}))},[h,F,H]),d)return n.default.createElement(T,{id:y,label:C,renderHelpIcon:B},n.default.createElement(Ft,{isLoading:d,title:"Beromir.ToggleEditor:Main:loading"}));if(Z.hidden)return null;if(!Z||!Z.length)return n.default.createElement(T,{id:y,label:C,className:a.error,renderHelpIcon:B},g.translate(`Beromir.ToggleEditor:Main:error.${N?"noDataFromSource":"noNodeTypeDefintion"}`));function mt(l){return bt.includes(l.value)}function rt(l,A){if(A&&A.blur(),!l){W(w?[]:u),ut([]);return}let b=l.value,G=[...bt],E=G.includes(b);w?E?G.splice(G.indexOf(b),1):G.push(b):G=E?[]:[b],!(!V&&G.length===0)&&(ut(G),w||(G=G[0]||u),W(G))}let pt=(l,A=0)=>{if(typeof l=="number"&&l>0)return l;let b=Z.length||1;if(!l||typeof l!="string")return b;try{return l=l.replaceAll("{items}",b),A&&(l=l.replaceAll("{maximalColumns}",b)),new Function(`return Math.floor(${l})`)()}catch(G){console.warn('An error occurred while trying to evaluate "'+l+`"
`,G)}},Mt=()=>{let l=pt(i,c),A=pt(c);return{"--columns":Math.min(l,A)}},Tt=g.translate("Beromir.ToggleEditor:Main:reset"),nt=({item:l,className:A=a.allowEmpty})=>V&&!w?n.default.createElement("span",{className:O(A,mt(l)&&a.allowEmptyShow)},n.default.createElement(Q.Icon,{size:"sm",icon:"times"})):null;return n.default.createElement(T,{id:y,label:C,className:[a[r],p&&a.disabled],style:Mt(),renderHelpIcon:B},st(Z).map((l,A)=>{let b=mt(l),G=l.disabled,E=b?"active":"default",Et=q(l,"label",!0,K=>g.translate(K)),Pt=q(l,"description",!0,K=>g.translate(K)),z=Et?.[E],P=Pt?.[E]||z,ot=b&&V?Tt:P;switch(r){case"list":return w?n.default.createElement(Q.Label,{className:a.listButton,title:P,"aria-label":ot,key:A},n.default.createElement(Q.CheckBox,{isChecked:b,disabled:G,onChange:()=>rt(l)}),n.default.createElement(D,{item:l,isCurrent:b,size:m}),n.default.createElement(M,{item:l,isCurrent:b}),z&&n.default.createElement("span",null,z)):n.default.createElement("button",{onClick:({currentTarget:j})=>rt(l,j),type:"button",title:P,"aria-label":ot,disabled:G,className:O(a.listButton,b&&a.selected),key:A},n.default.createElement("span",{className:O(a.radio,b&&et&&a.highlight)},n.default.createElement("span",null)),n.default.createElement(D,{item:l,isCurrent:b,size:m}),n.default.createElement(M,{item:l,isCurrent:b}),z&&n.default.createElement("span",null,z),n.default.createElement(nt,{item:l,className:a.allowEmptyRadio}));case"color":let K=l.color.length-1;return n.default.createElement("div",{className:a.colorBox,key:A},n.default.createElement("button",{onClick:({currentTarget:j})=>rt(l,j),type:"button",title:P,"aria-label":ot,disabled:G,className:O(a.colorButton,b&&(et?a.highlight:a.selected))},l.color.map((j,It)=>n.default.createElement("span",{key:`color-${It}`,className:O(a.colorPreview,j==="transparent"&&a.colorTransparent,K===It&&a.colorPreviewLast),style:{backgroundColor:j}})),n.default.createElement(nt,{item:l})),z&&n.default.createElement("span",{className:O(a.label,G&&a.disabled)},z));default:return n.default.createElement(Q.Button,{onClick:()=>rt(l),isActive:b,title:P,"aria-label":ot,disabled:G,className:O(a.button,b&&et&&a.highlight),key:A},n.default.createElement(D,{item:l,isCurrent:b,size:m}),n.default.createElement(M,{item:l,isCurrent:b}),z&&n.default.createElement("span",{className:O(l.icon||l.preview?a.label:null)},z),n.default.createElement(nt,{item:l}))}}))}Jt.propTypes={value:s.default.string,commit:s.default.func.isRequired,i18nRegistry:s.default.object.isRequired,options:s.default.shape({layout:s.default.oneOf(["grid","flex","flex-start","list","color"]),columns:s.default.oneOfType([s.default.string,s.default.number]),maximalColumns:s.default.oneOfType([s.default.string,s.default.number]),allowEmpty:s.default.bool,emptyValue:s.default.string,multiple:s.default.bool,iconSize:s.default.oneOf(["xs","sm","lg","2x","3x"]),values:s.default.objectOf(s.default.shape({label:s.default.string,icon:s.default.string,iconRotate:s.default.number,description:s.default.string,color:s.default.oneOfType([s.default.string,s.default.arrayOf(s.default.string)]),hidden:s.default.bool,preview:s.default.string,previewFull:s.default.bool,disabled:s.default.bool})),dataSourceIdentifier:s.default.string,dataSourceUri:s.default.string,dataSourceDisableCaching:s.default.bool,dataSourceAdditionalData:s.default.objectOf(s.default.any)}).isRequired};var me=(0,qt.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),pe=(0,jt.connect)(t=>({focusedNodePath:Qt.selectors.CR.Nodes.focusedNodePathSelector(t)})),Rt=me(pe(Jt));At("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:Rt,hasOwnLabel:!0})});})();
//# sourceMappingURL=Plugin.js.map
