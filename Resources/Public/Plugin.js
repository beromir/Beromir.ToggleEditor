(()=>{var It=Object.create;var N=Object.defineProperty;var pt=Object.getOwnPropertyDescriptor;var Ct=Object.getOwnPropertyNames;var At=Object.getPrototypeOf,xt=Object.prototype.hasOwnProperty;var ft=(t,o)=>()=>(t&&(o=t(t=0)),o);var A=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports);var Gt=(t,o,l,a)=>{if(o&&typeof o=="object"||typeof o=="function")for(let s of Ct(o))!xt.call(t,s)&&s!==l&&N(t,s,{get:()=>o[s],enumerable:!(a=pt(o,s))||a.enumerable});return t};var x=(t,o,l)=>(l=t!=null?It(At(t)):{},Gt(o||!t||!t.__esModule?N(l,"default",{value:t,enumerable:!0}):l,t));function n(t){return(...o)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...o);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var I=ft(()=>{});var H=A((te,k)=>{I();k.exports=n("vendor")().React});var j=A((oe,L)=>{I();L.exports=n("vendor")().PropTypes});var J=A((ie,q)=>{I();q.exports=n("NeosProjectPackages")().ReactUiComponents});var D=A((ae,Q)=>{I();Q.exports=n("NeosProjectPackages")().NeosUiDecorators});var T=A((de,U)=>{I();U.exports=n("vendor")().reactRedux});var E=A((me,M)=>{I();M.exports=n("NeosProjectPackages")().NeosUiReduxStore});I();var S=n("manifest");var g=x(H()),r=x(j()),f=x(J()),$=x(D());var i={colorPreviewLast:"beromir-toggleeditor-blateq-colorPreviewLast",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",grid:"beromir-toggleeditor-blateq-grid",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",disabled:"beromir-toggleeditor-blateq-disabled",imageFull:"beromir-toggleeditor-blateq-imageFull",image:"beromir-toggleeditor-blateq-image",button:"beromir-toggleeditor-blateq-button",listButton:"beromir-toggleeditor-blateq-listButton",colorPreview:"beromir-toggleeditor-blateq-colorPreview",color:"beromir-toggleeditor-blateq-color",loading:"beromir-toggleeditor-blateq-loading",label:"beromir-toggleeditor-blateq-label",highlight:"beromir-toggleeditor-blateq-highlight",error:"beromir-toggleeditor-blateq-error",wrapper:"beromir-toggleeditor-blateq-wrapper",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",colorBox:"beromir-toggleeditor-blateq-colorBox",radio:"beromir-toggleeditor-blateq-radio",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",flex:"beromir-toggleeditor-blateq-flex",colorButton:"beromir-toggleeditor-blateq-colorButton",list:"beromir-toggleeditor-blateq-list",imageSVG:"beromir-toggleeditor-blateq-imageSVG",selected:"beromir-toggleeditor-blateq-selected"};var tt=x(T()),et=x(E());function K(t){var o,l,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(o=0;o<s;o++)t[o]&&(l=K(t[o]))&&(a&&(a+=" "),a+=l)}else for(l in t)t[l]&&(a&&(a+=" "),a+=l);return a}function Xt(){for(var t,o,l=0,a="",s=arguments.length;l<s;l++)(t=arguments[l])&&(o=K(t))&&(a&&(a+=" "),a+=o);return a}var b=Xt;var yt=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),Bt={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,iconSize:null,disabled:!1,dataSourceIdentifier:null,dataSourceUri:null},P=null;function ot(t){let o={...Bt,...t.options},{layout:l,values:a,columns:s,maximalColumns:p,allowEmpty:B,iconSize:lt,disabled:at,dataSourceIdentifier:gt,dataSourceUri:st}=o,{value:G,commit:W,highlight:O,i18nRegistry:u,dataSourcesDataLoader:nt}=t,h=!!(gt||st),[ct,bt]=(0,g.useState)(h),[X,z]=(0,g.useState)(h?[]:vt(a,l,u));if((0,g.useEffect)(()=>{!h||P===JSON.stringify(o)||(P=JSON.stringify(o),nt.resolveValue(yt(t),G).then(e=>{if(bt(!1),l==="color"){z(rt(e));return}z(e)}))},[o]),ct)return g.default.createElement("div",{className:b(i.wrapper,i.loading),title:u.translate("Beromir.ToggleEditor:Main:loading")},g.default.createElement(f.Icon,{icon:"spinner",size:"lg",spin:!0}));if(!X||!X.length)return g.default.createElement("div",{className:b(i.wrapper,i.error)},u.translate(`Beromir.ToggleEditor:Main:error.${h?"noDataFromSource":"noNodeTypeDefintion"}`));let dt=u.translate("Beromir.ToggleEditor:Main:reset");function v(e,c){if(c&&c.blur(),!e||B&&G===e.value){W("");return}W(e.value)}let V=(e,c=0)=>{if(typeof e=="number"&&e>0)return e;let m=X.length||1;if(!e||typeof e!="string")return m;try{return e=e.replaceAll("{items}",m),c&&(e=e.replaceAll("{maximalColumns}",m)),new Function(`return Math.floor(${e})`)()}catch(d){console.warn('An error occurred while trying to evaluate "'+e+`"
`,d)}},ut=()=>{let e=V(s,p),c=V(p);return{"--columns":Math.min(e,c)}},F=e=>e.icon?g.default.createElement(f.Icon,{icon:e.icon,style:{transform:`rotate(${e.iconRotate||0}deg)`},size:lt}):null,y=e=>u.translate(e.description||e.label),Z=e=>B&&G===e.value?dt:y(e),w=(e,c=i.allowEmpty)=>B?g.default.createElement("span",{className:b(c,G===e.value&&i.allowEmptyShow)},g.default.createElement(f.Icon,{size:"sm",icon:"times"})):null;return g.default.createElement("div",{className:b(i.wrapper,i[l],at&&i.disabled),style:ut()},X.map(e=>{let c=G===e.value,m=e.disabled,d=u.translate(e.label);switch(l){case"list":return g.default.createElement("button",{onClick:({currentTarget:C})=>v(e,C),type:"button",title:y(e),"aria-label":Z(e),disabled:m,className:b(i.listButton,c&&i.selected)},g.default.createElement("span",{className:b(i.radio,c&&O&&i.highlight)},g.default.createElement("span",null)),F(e),_(e,u),d&&g.default.createElement("span",null,d),w(e,i.allowEmptyRadio));case"color":let mt=e.color.length-1;return g.default.createElement("div",{className:i.colorBox},g.default.createElement("button",{onClick:({currentTarget:C})=>v(e,C),type:"button",title:y(e),"aria-label":Z(e),disabled:m,className:b(i.colorButton,c&&(O?i.highlight:i.selected))},e.color.map((C,Y)=>g.default.createElement("span",{key:`color-${Y}`,className:b(i.colorPreview,C==="transparent"&&i.colorTransparent,mt===Y&&i.colorPreviewLast),style:{backgroundColor:C}})),w(e)),d&&g.default.createElement("span",{className:b(i.label,m&&i.disabled)},d));default:return g.default.createElement(f.Button,{onClick:()=>v(e),isActive:c,title:y(e),"aria-label":Z(e),disabled:m,className:b(i.button,c&&O&&i.highlight)},F(e),_(e,u),d&&g.default.createElement("span",{className:b(e.icon||e.preview?i.label:null)},d),w(e))}}))}ot.propTypes={value:r.default.string,commit:r.default.func.isRequired,i18nRegistry:r.default.object.isRequired,options:r.default.shape({layout:r.default.oneOf(["grid","flex","list","color"]),columns:r.default.oneOfType([r.default.string,r.default.number]),maximalColumns:r.default.oneOfType([r.default.string,r.default.number]),allowEmpty:r.default.bool,iconSize:r.default.oneOf(["xs","sm","lg","2x","3x"]),values:r.default.objectOf(r.default.shape({label:r.default.string,icon:r.default.string,iconRotate:r.default.number,description:r.default.string,color:r.default.oneOfType([r.default.string,r.default.arrayOf(r.default.string)]),hidden:r.default.bool,preview:r.default.string,previewFull:r.default.bool,disabled:r.default.bool})),dataSourceIdentifier:r.default.string,dataSourceUri:r.default.string,dataSourceDisableCaching:r.default.bool,dataSourceAdditionalData:r.default.objectOf(r.default.any)}).isRequired};function rt(t){return Array.isArray(t)?(t=t.map(o=>({...o,color:Ot(o.color)})).filter(o=>o.color),t):[]}function Ot(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function _(t,o){if(!t||!t.preview)return null;let l=t.preview,a=t.previewFull?i.imageFull:null,s=o.translate(t.description||t.label);if(l.startsWith("<svg "))return g.default.createElement("div",{className:b(i.imageSVG,a),"aria-label":s,dangerouslySetInnerHTML:{__html:l}});let p=l.startsWith("resource://")?`/_Resources/Static/Packages/${l.substr(11)}`:l;return g.default.createElement("img",{src:p,className:b(i.image,a),alt:s})}function vt(t,o,l){if(!t||typeof t!="object")return[];let a=[];for(let s in t){let p=t[s];p.hidden||a.push({...p,value:s})}return o==="color"?rt(a):a}var Zt=(0,$.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),wt=(0,tt.connect)(t=>({focusedNodePath:et.selectors.CR.Nodes.focusedNodePathSelector(t)})),it=Zt(wt(ot));S("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:it})});})();
//# sourceMappingURL=Plugin.js.map
