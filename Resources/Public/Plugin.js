(()=>{var kt=Object.create;var gt=Object.defineProperty;var Ht=Object.getOwnPropertyDescriptor;var jt=Object.getOwnPropertyNames;var Qt=Object.getPrototypeOf,Ut=Object.prototype.hasOwnProperty;var Tt=(t,e)=>()=>(t&&(e=t(t=0)),e);var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Et=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of jt(e))!Ut.call(t,a)&&a!==r&&gt(t,a,{get:()=>e[a],enumerable:!(i=Ht(e,a))||i.enumerable});return t};var f=(t,e,r)=>(r=t!=null?kt(Qt(t)):{},Et(e||!t||!t.__esModule?gt(r,"default",{value:t,enumerable:!0}):r,t));function u(t){return(...e)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...e);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var y=Tt(()=>{});var W=O((ve,dt)=>{y();dt.exports=u("vendor")().React});var mt=O((ze,ut)=>{y();ut.exports=u("vendor")().PropTypes});var Q=O((Fe,pt)=>{y();pt.exports=u("NeosProjectPackages")().ReactUiComponents});var _=O((Ne,It)=>{y();It.exports=u("NeosProjectPackages")().NeosUiDecorators});var Ct=O((De,ft)=>{y();ft.exports=u("vendor")().reactRedux});var Gt=O((He,At)=>{y();At.exports=u("NeosProjectPackages")().NeosUiReduxStore});y();var bt=u("manifest");var s=f(W()),n=f(mt()),A=f(Q()),Wt=f(_());var l={image:"beromir-toggleeditor-blateq-image",highlight:"beromir-toggleeditor-blateq-highlight",flex:"beromir-toggleeditor-blateq-flex",layered:"beromir-toggleeditor-blateq-layered",listButton:"beromir-toggleeditor-blateq-listButton",loading:"beromir-toggleeditor-blateq-loading",error:"beromir-toggleeditor-blateq-error",radio:"beromir-toggleeditor-blateq-radio","flex-start":"beromir-toggleeditor-blateq-flex-start",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",grid:"beromir-toggleeditor-blateq-grid",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",disabled:"beromir-toggleeditor-blateq-disabled",imageSVG:"beromir-toggleeditor-blateq-imageSVG",colorPreview:"beromir-toggleeditor-blateq-colorPreview",color:"beromir-toggleeditor-blateq-color",selected:"beromir-toggleeditor-blateq-selected",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",wrapper:"beromir-toggleeditor-blateq-wrapper",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",colorButton:"beromir-toggleeditor-blateq-colorButton",label:"beromir-toggleeditor-blateq-label",colorPreviewLast:"beromir-toggleeditor-blateq-colorPreviewLast",imageFull:"beromir-toggleeditor-blateq-imageFull",list:"beromir-toggleeditor-blateq-list",transition:"beromir-toggleeditor-blateq-transition",content:"beromir-toggleeditor-blateq-content",button:"beromir-toggleeditor-blateq-button",colorBox:"beromir-toggleeditor-blateq-colorBox"};var vt=f(Ct()),wt=f(Gt());var v=f(W()),J=f(Q());function ht(t){var e,r,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=ht(t[e]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r);return i}function Kt(){for(var t,e,r=0,i="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=ht(t))&&(i&&(i+=" "),i+=e);return i}var m=Kt;var yt=t=>Zt("preview",t),xt=t=>Zt("icon",t);function Z(t,e,r=!1,i=c=>c,a=""){let c=`${e}Active${a}`,b=t[e+a],p=t[c];return r&&p===void 0&&(p=b),b==null&&p==null?null:{default:i(b),active:i(p)}}function Xt(t,e){if(!t||typeof t!="object")return[];let r=[];for(let i in t){let a=t[i];a.hidden||r.push({...a,value:i})}return e==="color"?$(r):r}function $(t){return Array.isArray(t)?(t=t.map(e=>({...e,color:Pt(e.color)})).filter(e=>e.color),t):[]}function Pt(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function Zt(t,e){if(!e)return null;let r=Z(e,t);if(!r)return null;let i=r.default&&r.active,a=Z(e,t,!0,p=>`rotate(${p||0}deg)`,"Rotate"),c=Z("label",t,!0),b=Z("description",!0);return{type:t,needLayering:i,state:r,label:c,description:b,rotate:a}}function w({item:t,size:e,isCurrent:r}){let i=xt(t);if(!i)return null;let{state:a,rotate:c,needLayering:b}=i;return b?v.default.createElement("span",{className:l.layered},v.default.createElement(J.Icon,{icon:a.default,className:l.transition,style:{opacity:r?0:1,transform:c?.default},size:e}),v.default.createElement(J.Icon,{icon:a.active,className:l.transition,style:{opacity:r?1:0,transform:c?.active},size:e})):a.default?v.default.createElement(J.Icon,{icon:a.default,className:l.transition,style:{transform:r?c?.active:c?.default},size:e}):a.active&&r?v.default.createElement(J.Icon,{icon:a.active,style:{transform:c?.active},size:e}):null}var z=f(W());var tt=f(W()),Bt=f(_());var _t=(0,Bt.neos)(t=>({i18nRegistry:t.get("i18n")})),q=_t($t);function $t({src:t,className:e,style:r,label:i,i18nRegistry:a}){let c=a.translate(i);return t.startsWith("<svg ")?tt.default.createElement("div",{className:m(r.imageSVG,e),style:r,"aria-label":c,dangerouslySetInnerHTML:{__html:t}}):tt.default.createElement("img",{className:m(r.image,e),style:r,alt:c,src:t.startsWith("resource://")?`/_Resources/Static/Packages/${t.substr(11)}`:t})}function V({item:t,isCurrent:e}){let r=yt(t);if(!r)return null;let{state:i,rotate:a,needLayering:c,label:b,description:p}=r,G=t.previewFull?l.imageFull:null;return r.needLayering?z.default.createElement("span",{className:l.layered},z.default.createElement(q,{src:i.default,className:[l.transition,G],style:{opacity:e?0:1,transform:a?.default},label:p?.default||b?.default}),z.default.createElement(q,{src:i.active,className:[l.transition,G],style:{opacity:e?1:0,transform:a?.active},label:p?.active||b?.active})):i.default?z.default.createElement(q,{src:i.default,className:[l.transition,G],style:{transform:e?a?.active:a?.default},label:p?.default||b?.default}):i.active&&e?z.default.createElement(q,{src:i.active,className:[l.transition,G],style:{transform:a?.active},label:p?.active||b?.active}):null}var R=f(W()),Ot=f(Q());function F({children:t,label:e,id:r,className:i,setIdOnWrapper:a=!0,title:c,style:b}){return t?R.default.createElement(R.default.Fragment,null,e&&R.default.createElement(Ot.Label,{htmlFor:r},e),R.default.createElement("div",{id:a?r:null,className:m(l.wrapper,i),style:b,title:c},t)):null}var te=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),ee={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,multiple:!1,iconSize:null,disabled:!1,hidden:!1,dataSourceIdentifier:null,dataSourceUri:null};function zt(t){let e={...ee,...t.options},{layout:r,values:i,columns:a,maximalColumns:c,iconSize:b,disabled:p,dataSourceIdentifier:G,dataSourceUri:U,dataSourceAdditionalData:et,multiple:x}=e,T=x||e.allowEmpty,{value:Y,commit:rt,highlight:E,i18nRegistry:X,id:D,dataSourcesDataLoader:Ft}=t,M=X.translate(t.label);x&&!Array.isArray(Y)&&console.warn(`Misconfiguration in property "${t.identifier}". Multiple is activated but value type seems to be "string" but should be "array".`);let k=!!(G||U),[Yt,Nt]=(0,s.useState)(k),[N,K]=(0,s.useState)(k?[]:Xt(i,r,X)),[ot,it]=(0,s.useState)(Array.isArray(Y)?Y:[Y]),[Lt,St]=(0,s.useState)(null);if((0,s.useEffect)(()=>{let o=JSON.stringify({dataSourceIdentifier:G,dataSourceUri:U,dataSourceAdditionalData:et});!k||Lt===o||(St(o),Ft.resolveValue(te(t),Y).then(d=>{if(Nt(!1),d.hidden){K({hidden:!0});return}if(r==="color"){K($(d));return}K(d)}))},[G,U,et]),Yt)return s.default.createElement(F,{id:D,label:M,className:l.loading,title:X.translate("Beromir.ToggleEditor:Main:loading")},s.default.createElement(A.Icon,{icon:"spinner",size:"lg",spin:!0}));if(N.hidden)return null;if(!N||!N.length)return s.default.createElement(F,{id:D,label:M,className:l.error},X.translate(`Beromir.ToggleEditor:Main:error.${k?"noDataFromSource":"noNodeTypeDefintion"}`));function lt(o){return ot.includes(o.value)}function H(o,d){if(d&&d.blur(),!o){rt(x?[]:""),it([]);return}let I=o.value,g=[...ot],h=g.includes(I);x?h?g.splice(g.indexOf(I),1):g.push(I):g=h?[]:[I],!(!T&&g.length===0)&&(it(g),x||(g=g[0]||""),rt(g))}let at=(o,d=0)=>{if(typeof o=="number"&&o>0)return o;let I=N.length||1;if(!o||typeof o!="string")return I;try{return o=o.replaceAll("{items}",I),d&&(o=o.replaceAll("{maximalColumns}",I)),new Function(`return Math.floor(${o})`)()}catch(g){console.warn('An error occurred while trying to evaluate "'+o+`"
`,g)}},Jt=()=>{let o=at(a,c),d=at(c);return{"--columns":Math.min(o,d)}},qt=X.translate("Beromir.ToggleEditor:Main:reset"),P=({item:o,className:d=l.allowEmpty})=>T&&!x?s.default.createElement("span",{className:m(d,lt(o)&&l.allowEmptyShow)},s.default.createElement(A.Icon,{size:"sm",icon:"times"})):null;return s.default.createElement(F,{id:D,label:M,className:[l[r],p&&l.disabled],style:Jt(),setIdOnWrapper:!1},N.map((o,d)=>{let I=d===0?D:null,g=lt(o),h=o.disabled,st=g?"active":"default",Rt=Z(o,"label",!0,S=>X.translate(S)),Dt=Z(o,"description",!0,S=>X.translate(S)),C=Rt?.[st],L=Dt?.[st]||C,j=g&&T?qt:L;switch(r){case"list":return x?s.default.createElement(A.Label,{id:I,className:l.listButton,title:L,"aria-label":j,key:d},s.default.createElement(A.CheckBox,{isChecked:g,disabled:h,onChange:()=>H(o)}),s.default.createElement(w,{item:o,isCurrent:g,size:b}),s.default.createElement(V,{item:o,isCurrent:g}),C&&s.default.createElement("span",null,C)):s.default.createElement("button",{id:I,onClick:({currentTarget:B})=>H(o,B),type:"button",title:L,"aria-label":j,disabled:h,className:m(l.listButton,g&&l.selected),key:d},s.default.createElement("span",{className:m(l.radio,g&&E&&l.highlight)},s.default.createElement("span",null)),s.default.createElement(w,{item:o,isCurrent:g,size:b}),s.default.createElement(V,{item:o,isCurrent:g}),C&&s.default.createElement("span",null,C),s.default.createElement(P,{item:o,className:l.allowEmptyRadio}));case"color":let S=o.color.length-1;return s.default.createElement("div",{className:l.colorBox,key:d},s.default.createElement("button",{id:I,onClick:({currentTarget:B})=>H(o,B),type:"button",title:L,"aria-label":j,disabled:h,className:m(l.colorButton,g&&(E?l.highlight:l.selected))},o.color.map((B,nt)=>s.default.createElement("span",{key:`color-${nt}`,className:m(l.colorPreview,B==="transparent"&&l.colorTransparent,S===nt&&l.colorPreviewLast),style:{backgroundColor:B}})),s.default.createElement(P,{item:o})),C&&s.default.createElement("span",{className:m(l.label,h&&l.disabled)},C));default:return s.default.createElement(A.Button,{id:I,onClick:()=>H(o),isActive:g,title:L,"aria-label":j,disabled:h,className:m(l.button,g&&E&&l.highlight),key:d},s.default.createElement(w,{item:o,isCurrent:g,size:b}),s.default.createElement(V,{item:o,isCurrent:g}),C&&s.default.createElement("span",{className:m(o.icon||o.preview?l.label:null)},C),s.default.createElement(P,{item:o}))}}))}zt.propTypes={value:n.default.string,commit:n.default.func.isRequired,i18nRegistry:n.default.object.isRequired,options:n.default.shape({layout:n.default.oneOf(["grid","flex","flex-start","list","color"]),columns:n.default.oneOfType([n.default.string,n.default.number]),maximalColumns:n.default.oneOfType([n.default.string,n.default.number]),allowEmpty:n.default.bool,multiple:n.default.bool,iconSize:n.default.oneOf(["xs","sm","lg","2x","3x"]),values:n.default.objectOf(n.default.shape({label:n.default.string,icon:n.default.string,iconRotate:n.default.number,description:n.default.string,color:n.default.oneOfType([n.default.string,n.default.arrayOf(n.default.string)]),hidden:n.default.bool,preview:n.default.string,previewFull:n.default.bool,disabled:n.default.bool})),dataSourceIdentifier:n.default.string,dataSourceUri:n.default.string,dataSourceDisableCaching:n.default.bool,dataSourceAdditionalData:n.default.objectOf(n.default.any)}).isRequired};var re=(0,Wt.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),oe=(0,vt.connect)(t=>({focusedNodePath:wt.selectors.CR.Nodes.focusedNodePathSelector(t)})),Vt=re(oe(zt));bt("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:Vt,hasOwnLabel:!0})});})();
//# sourceMappingURL=Plugin.js.map
