(()=>{var Ct=Object.create;var k=Object.defineProperty;var At=Object.getOwnPropertyDescriptor;var xt=Object.getOwnPropertyNames;var Gt=Object.getPrototypeOf,ft=Object.prototype.hasOwnProperty;var ht=(t,o)=>()=>(t&&(o=t(t=0)),o);var A=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports);var Xt=(t,o,l,g)=>{if(o&&typeof o=="object"||typeof o=="function")for(let s of xt(o))!ft.call(t,s)&&s!==l&&k(t,s,{get:()=>o[s],enumerable:!(g=At(o,s))||g.enumerable});return t};var x=(t,o,l)=>(l=t!=null?Ct(Gt(t)):{},Xt(o||!t||!t.__esModule?k(l,"default",{value:t,enumerable:!0}):l,t));function c(t){return(...o)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...o);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var I=ht(()=>{});var q=A((oe,j)=>{I();j.exports=c("vendor")().React});var Q=A((ie,J)=>{I();J.exports=c("vendor")().PropTypes});var U=A((ae,D)=>{I();D.exports=c("NeosProjectPackages")().ReactUiComponents});var M=A((se,T)=>{I();T.exports=c("NeosProjectPackages")().NeosUiDecorators});var K=A((me,E)=>{I();E.exports=c("vendor")().reactRedux});var _=A((pe,P)=>{I();P.exports=c("NeosProjectPackages")().NeosUiReduxStore});I();var L=c("manifest");var a=x(q()),r=x(Q()),G=x(U()),et=x(M());var i={colorButton:"beromir-toggleeditor-blateq-colorButton",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",radio:"beromir-toggleeditor-blateq-radio",list:"beromir-toggleeditor-blateq-list",button:"beromir-toggleeditor-blateq-button",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",label:"beromir-toggleeditor-blateq-label",disabled:"beromir-toggleeditor-blateq-disabled",color:"beromir-toggleeditor-blateq-color",wrapper:"beromir-toggleeditor-blateq-wrapper",loading:"beromir-toggleeditor-blateq-loading",listButton:"beromir-toggleeditor-blateq-listButton",flex:"beromir-toggleeditor-blateq-flex",colorPreviewLast:"beromir-toggleeditor-blateq-colorPreviewLast",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",grid:"beromir-toggleeditor-blateq-grid",selected:"beromir-toggleeditor-blateq-selected",highlight:"beromir-toggleeditor-blateq-highlight",error:"beromir-toggleeditor-blateq-error",imageFull:"beromir-toggleeditor-blateq-imageFull",image:"beromir-toggleeditor-blateq-image",imageSVG:"beromir-toggleeditor-blateq-imageSVG",colorPreview:"beromir-toggleeditor-blateq-colorPreview",colorBox:"beromir-toggleeditor-blateq-colorBox"};var ot=x(K()),rt=x(_());function $(t){var o,l,g="";if(typeof t=="string"||typeof t=="number")g+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(o=0;o<s;o++)t[o]&&(l=$(t[o]))&&(g&&(g+=" "),g+=l)}else for(l in t)t[l]&&(g&&(g+=" "),g+=l);return g}function Bt(){for(var t,o,l=0,g="",s=arguments.length;l<s;l++)(t=arguments[l])&&(o=$(t))&&(g&&(g+=" "),g+=o);return g}var b=Bt;var Ot=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),vt={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,iconSize:null,disabled:!1,dataSourceIdentifier:null,dataSourceUri:null};function it(t){let o={...vt,...t.options},{layout:l,values:g,columns:s,maximalColumns:p,allowEmpty:B,iconSize:gt,disabled:st,dataSourceIdentifier:O,dataSourceUri:v,dataSourceAdditionalData:V}=o,{value:f,commit:F,highlight:Z,i18nRegistry:u,dataSourcesDataLoader:nt}=t,h=!!(O||v),[ct,bt]=(0,a.useState)(h),[X,Y]=(0,a.useState)(h?[]:wt(g,l,u)),[dt,ut]=(0,a.useState)(null);if((0,a.useEffect)(()=>{let e=JSON.stringify({dataSourceIdentifier:O,dataSourceUri:v,dataSourceAdditionalData:V});!h||dt===e||(ut(e),nt.resolveValue(Ot(t),f).then(n=>{if(bt(!1),l==="color"){Y(lt(n));return}Y(n)}))},[O,v,V]),ct)return a.default.createElement("div",{className:b(i.wrapper,i.loading),title:u.translate("Beromir.ToggleEditor:Main:loading")},a.default.createElement(G.Icon,{icon:"spinner",size:"lg",spin:!0}));if(!X||!X.length)return a.default.createElement("div",{className:b(i.wrapper,i.error)},u.translate(`Beromir.ToggleEditor:Main:error.${h?"noDataFromSource":"noNodeTypeDefintion"}`));let mt=u.translate("Beromir.ToggleEditor:Main:reset");function w(e,n){if(n&&n.blur(),!e||B&&f===e.value){F("");return}F(e.value)}let N=(e,n=0)=>{if(typeof e=="number"&&e>0)return e;let m=X.length||1;if(!e||typeof e!="string")return m;try{return e=e.replaceAll("{items}",m),n&&(e=e.replaceAll("{maximalColumns}",m)),new Function(`return Math.floor(${e})`)()}catch(d){console.warn('An error occurred while trying to evaluate "'+e+`"
`,d)}},It=()=>{let e=N(s,p),n=N(p);return{"--columns":Math.min(e,n)}},R=e=>e.icon?a.default.createElement(G.Icon,{icon:e.icon,style:{transform:`rotate(${e.iconRotate||0}deg)`},size:gt}):null,y=e=>u.translate(e.description||e.label),W=e=>B&&f===e.value?mt:y(e),z=(e,n=i.allowEmpty)=>B?a.default.createElement("span",{className:b(n,f===e.value&&i.allowEmptyShow)},a.default.createElement(G.Icon,{size:"sm",icon:"times"})):null;return a.default.createElement("div",{className:b(i.wrapper,i[l],st&&i.disabled),style:It()},X.map(e=>{let n=f===e.value,m=e.disabled,d=u.translate(e.label);switch(l){case"list":return a.default.createElement("button",{onClick:({currentTarget:C})=>w(e,C),type:"button",title:y(e),"aria-label":W(e),disabled:m,className:b(i.listButton,n&&i.selected)},a.default.createElement("span",{className:b(i.radio,n&&Z&&i.highlight)},a.default.createElement("span",null)),R(e),tt(e,u),d&&a.default.createElement("span",null,d),z(e,i.allowEmptyRadio));case"color":let pt=e.color.length-1;return a.default.createElement("div",{className:i.colorBox},a.default.createElement("button",{onClick:({currentTarget:C})=>w(e,C),type:"button",title:y(e),"aria-label":W(e),disabled:m,className:b(i.colorButton,n&&(Z?i.highlight:i.selected))},e.color.map((C,S)=>a.default.createElement("span",{key:`color-${S}`,className:b(i.colorPreview,C==="transparent"&&i.colorTransparent,pt===S&&i.colorPreviewLast),style:{backgroundColor:C}})),z(e)),d&&a.default.createElement("span",{className:b(i.label,m&&i.disabled)},d));default:return a.default.createElement(G.Button,{onClick:()=>w(e),isActive:n,title:y(e),"aria-label":W(e),disabled:m,className:b(i.button,n&&Z&&i.highlight)},R(e),tt(e,u),d&&a.default.createElement("span",{className:b(e.icon||e.preview?i.label:null)},d),z(e))}}))}it.propTypes={value:r.default.string,commit:r.default.func.isRequired,i18nRegistry:r.default.object.isRequired,options:r.default.shape({layout:r.default.oneOf(["grid","flex","list","color"]),columns:r.default.oneOfType([r.default.string,r.default.number]),maximalColumns:r.default.oneOfType([r.default.string,r.default.number]),allowEmpty:r.default.bool,iconSize:r.default.oneOf(["xs","sm","lg","2x","3x"]),values:r.default.objectOf(r.default.shape({label:r.default.string,icon:r.default.string,iconRotate:r.default.number,description:r.default.string,color:r.default.oneOfType([r.default.string,r.default.arrayOf(r.default.string)]),hidden:r.default.bool,preview:r.default.string,previewFull:r.default.bool,disabled:r.default.bool})),dataSourceIdentifier:r.default.string,dataSourceUri:r.default.string,dataSourceDisableCaching:r.default.bool,dataSourceAdditionalData:r.default.objectOf(r.default.any)}).isRequired};function lt(t){return Array.isArray(t)?(t=t.map(o=>({...o,color:Zt(o.color)})).filter(o=>o.color),t):[]}function Zt(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function tt(t,o){if(!t||!t.preview)return null;let l=t.preview,g=t.previewFull?i.imageFull:null,s=o.translate(t.description||t.label);if(l.startsWith("<svg "))return a.default.createElement("div",{className:b(i.imageSVG,g),"aria-label":s,dangerouslySetInnerHTML:{__html:l}});let p=l.startsWith("resource://")?`/_Resources/Static/Packages/${l.substr(11)}`:l;return a.default.createElement("img",{src:p,className:b(i.image,g),alt:s})}function wt(t,o,l){if(!t||typeof t!="object")return[];let g=[];for(let s in t){let p=t[s];p.hidden||g.push({...p,value:s})}return o==="color"?lt(g):g}var Wt=(0,et.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),zt=(0,ot.connect)(t=>({focusedNodePath:rt.selectors.CR.Nodes.focusedNodePathSelector(t)})),at=Wt(zt(it));L("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:at})});})();
//# sourceMappingURL=Plugin.js.map
