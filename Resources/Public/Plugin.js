(()=>{var mt=Object.create;var Y=Object.defineProperty;var It=Object.getOwnPropertyDescriptor;var pt=Object.getOwnPropertyNames;var Ct=Object.getPrototypeOf,At=Object.prototype.hasOwnProperty;var ft=(t,o)=>()=>(t&&(o=t(t=0)),o);var A=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports);var ht=(t,o,i,l)=>{if(o&&typeof o=="object"||typeof o=="function")for(let s of pt(o))!At.call(t,s)&&s!==i&&Y(t,s,{get:()=>o[s],enumerable:!(l=It(o,s))||l.enumerable});return t};var f=(t,o,i)=>(i=t!=null?mt(Ct(t)):{},ht(o||!t||!t.__esModule?Y(i,"default",{value:t,enumerable:!0}):i,t));function n(t){return(...o)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...o);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var p=ft(()=>{});var H=A((te,S)=>{p();S.exports=n("vendor")().React});var k=A((oe,q)=>{p();q.exports=n("vendor")().PropTypes});var U=A((ie,L)=>{p();L.exports=n("NeosProjectPackages")().ReactUiComponents});var D=A((ae,j)=>{p();j.exports=n("NeosProjectPackages")().NeosUiDecorators});var T=A((de,J)=>{p();J.exports=n("vendor")().reactRedux});var E=A((me,Q)=>{p();Q.exports=n("NeosProjectPackages")().NeosUiReduxStore});p();var R=n("manifest");var g=f(H()),r=f(k()),h=f(U()),_=f(D());var a={button:"beromir-toggleeditor-blateq-button",label:"beromir-toggleeditor-blateq-label",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",selected:"beromir-toggleeditor-blateq-selected",wrapper:"beromir-toggleeditor-blateq-wrapper",colorButton:"beromir-toggleeditor-blateq-colorButton",error:"beromir-toggleeditor-blateq-error",imageFull:"beromir-toggleeditor-blateq-imageFull",image:"beromir-toggleeditor-blateq-image",color:"beromir-toggleeditor-blateq-color",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",loading:"beromir-toggleeditor-blateq-loading",highlight:"beromir-toggleeditor-blateq-highlight",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",imageSVG:"beromir-toggleeditor-blateq-imageSVG",grid:"beromir-toggleeditor-blateq-grid",listButton:"beromir-toggleeditor-blateq-listButton",disabled:"beromir-toggleeditor-blateq-disabled",flex:"beromir-toggleeditor-blateq-flex",radio:"beromir-toggleeditor-blateq-radio",list:"beromir-toggleeditor-blateq-list",colorBox:"beromir-toggleeditor-blateq-colorBox"};var $=f(T()),tt=f(E());function M(t){var o,i,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(o=0;o<s;o++)t[o]&&(i=M(t[o]))&&(l&&(l+=" "),l+=i)}else for(i in t)t[i]&&(l&&(l+=" "),l+=i);return l}function Gt(){for(var t,o,i=0,l="",s=arguments.length;i<s;i++)(t=arguments[i])&&(o=M(t))&&(l&&(l+=" "),l+=o);return l}var b=Gt;var yt=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),Xt={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,iconSize:null,disabled:!1,dataSourceIdentifier:null,dataSourceUri:null},K=null;function et(t){let o={...Xt,...t.options},{layout:i,values:l,columns:s,maximalColumns:d,allowEmpty:C,iconSize:it,disabled:lt,dataSourceIdentifier:at,dataSourceUri:gt}=o,{value:x,commit:v,highlight:B,i18nRegistry:m,dataSourcesDataLoader:st}=t,G=!!(at||gt),[nt,ct]=(0,g.useState)(G),[y,z]=(0,g.useState)(G?[]:Zt(l,i,m));if((0,g.useEffect)(()=>{!G||K===JSON.stringify(o)||(K=JSON.stringify(o),st.resolveValue(yt(t),x).then(e=>{if(ct(!1),i==="color"){z(ot(e));return}z(e)}))},[o]),nt)return g.default.createElement("div",{className:b(a.wrapper,a.loading),title:m.translate("Beromir.ToggleEditor:Main:loading")},g.default.createElement(h.Icon,{icon:"spinner",size:"lg",spin:!0}));if(!y||!y.length)return g.default.createElement("div",{className:b(a.wrapper,a.error)},m.translate(`Beromir.ToggleEditor:Main:error.${G?"noDataFromSource":"noNodeTypeDefintion"}`));let bt=m.translate("Beromir.ToggleEditor:Main:reset");function O(e,c){if(c&&c.blur(),!e||C&&x===e.value){v("");return}v(e.value)}let F=(e,c=0)=>{if(typeof e=="number"&&e>0)return e;let I=y.length||1;if(!e||typeof e!="string")return I;try{return e=e.replaceAll("{items}",I),c&&(e=e.replaceAll("{maximalColumns}",I)),new Function(`return Math.floor(${e})`)()}catch(u){console.warn('An error occurred while trying to evaluate "'+e+`"
`,u)}},dt=()=>{let e=F(s,d),c=F(d);return{"--columns":Math.min(e,c)}},N=e=>e.icon?g.default.createElement(h.Icon,{icon:e.icon,style:{transform:`rotate(${e.iconRotate||0}deg)`},size:it}):null,X=e=>m.translate(e.description||e.label),Z=e=>C&&x===e.value?bt:X(e),W=(e,c=a.allowEmpty)=>C?g.default.createElement("div",{className:b(c,x===e.value&&a.allowEmptyShow)},g.default.createElement(h.Icon,{size:"sm",icon:"times"})):null;return g.default.createElement("div",{className:b(a.wrapper,a[i],lt&&a.disabled),style:dt()},y.map(e=>{let c=x===e.value,I=e.disabled,u=m.translate(e.label);switch(i){case"list":return g.default.createElement("button",{onClick:({currentTarget:w})=>O(e,w),type:"button",title:X(e),"aria-label":Z(e),disabled:I,className:b(a.listButton,c&&a.selected)},g.default.createElement("span",{className:b(a.radio,c&&B&&a.highlight)},g.default.createElement("span",null)),N(e),P(e,m),u&&g.default.createElement("span",null,u),W(e,a.allowEmptyRadio));case"color":let ut=e.color.length===1&&e.color[0]==="transparent";return g.default.createElement("div",{className:a.colorBox},g.default.createElement("button",{onClick:({currentTarget:w})=>O(e,w),type:"button",title:X(e),"aria-label":Z(e),disabled:I,className:b(a.colorButton,c&&(B?a.highlight:a.selected),ut&&a.colorTransparent),style:Ot(e.color)},W(e)),u&&g.default.createElement("span",{className:b(a.label,I&&a.disabled)},u));default:return g.default.createElement(h.Button,{onClick:()=>O(e),isActive:c,title:X(e),"aria-label":Z(e),disabled:I,className:b(a.button,c&&B&&a.highlight)},N(e),P(e,m),u&&g.default.createElement("span",{className:b(e.icon||e.preview?a.label:null)},u),W(e))}}))}et.propTypes={value:r.default.string,commit:r.default.func.isRequired,i18nRegistry:r.default.object.isRequired,options:r.default.shape({layout:r.default.oneOf(["grid","flex","list","color"]),columns:r.default.oneOfType([r.default.string,r.default.number]),maximalColumns:r.default.oneOfType([r.default.string,r.default.number]),allowEmpty:r.default.bool,iconSize:r.default.oneOf(["xs","sm","lg","2x","3x"]),values:r.default.objectOf(r.default.shape({label:r.default.string,icon:r.default.string,iconRotate:r.default.number,description:r.default.string,color:r.default.oneOfType([r.default.string,r.default.arrayOf(r.default.string)]),hidden:r.default.bool,preview:r.default.string,previewFull:r.default.bool,disabled:r.default.bool})),dataSourceIdentifier:r.default.string,dataSourceUri:r.default.string,dataSourceDisableCaching:r.default.bool,dataSourceAdditionalData:r.default.objectOf(r.default.any)}).isRequired};function ot(t){return Array.isArray(t)?(t=t.map(o=>({...o,color:Bt(o.color)})).filter(o=>o.color),t):[]}function Bt(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function Ot(t){let o=t.length;if(o===1)return{backgroundColor:t[0]};let i="",l=[];return t.forEach((s,d)=>{let C=`${Math.round(d/o*100)}%`;i&&l.push(`${i} ${C}`),i=s,l.push(`${s} ${C}`)}),l.push(`${i} 100%`),{backgroundImage:`linear-gradient(90deg, ${l.join(", ")})`}}function P(t,o){if(!t||!t.preview)return null;let i=t.preview,l=t.previewFull?a.imageFull:null,s=o.translate(t.description||t.label);if(i.startsWith("<svg "))return g.default.createElement("div",{className:b(a.imageSVG,l),"aria-label":s,dangerouslySetInnerHTML:{__html:i}});let d=i.startsWith("resource://")?`/_Resources/Static/Packages/${i.substr(11)}`:i;return g.default.createElement("img",{src:d,className:b(a.image,l),alt:s})}function Zt(t,o,i){if(!t||typeof t!="object")return[];let l=[];for(let s in t){let d=t[s];d.hidden||l.push({...d,value:s})}return o==="color"?ot(l):l}var Wt=(0,_.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),wt=(0,$.connect)(t=>({focusedNodePath:tt.selectors.CR.Nodes.focusedNodePathSelector(t)})),rt=Wt(wt(et));R("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:rt})});})();
//# sourceMappingURL=Plugin.js.map
