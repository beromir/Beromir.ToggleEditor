(()=>{var It=Object.create;var R=Object.defineProperty;var pt=Object.getOwnPropertyDescriptor;var Ct=Object.getOwnPropertyNames;var Gt=Object.getPrototypeOf,ht=Object.prototype.hasOwnProperty;var At=(t,o)=>()=>(t&&(o=t(t=0)),o);var G=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports);var ft=(t,o,l,a)=>{if(o&&typeof o=="object"||typeof o=="function")for(let s of Ct(o))!ht.call(t,s)&&s!==l&&R(t,s,{get:()=>o[s],enumerable:!(a=pt(o,s))||a.enumerable});return t};var h=(t,o,l)=>(l=t!=null?It(Gt(t)):{},ft(o||!t||!t.__esModule?R(l,"default",{value:t,enumerable:!0}):l,t));function n(t){return(...o)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...o);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var I=At(()=>{});var S=G((te,L)=>{I();L.exports=n("vendor")().React});var j=G((oe,k)=>{I();k.exports=n("vendor")().PropTypes});var Q=G((ie,q)=>{I();q.exports=n("NeosProjectPackages")().ReactUiComponents});var D=G((ae,J)=>{I();J.exports=n("NeosProjectPackages")().NeosUiDecorators});var M=G((de,U)=>{I();U.exports=n("vendor")().reactRedux});var E=G((me,T)=>{I();T.exports=n("NeosProjectPackages")().NeosUiReduxStore});I();var Y=n("manifest");var g=h(S()),r=h(j()),A=h(Q()),$=h(D());var i={allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",image:"beromir-toggleeditor-blateq-image",flex:"beromir-toggleeditor-blateq-flex",radio:"beromir-toggleeditor-blateq-radio",colorBox:"beromir-toggleeditor-blateq-colorBox",button:"beromir-toggleeditor-blateq-button",imageFull:"beromir-toggleeditor-blateq-imageFull",error:"beromir-toggleeditor-blateq-error",wrapper:"beromir-toggleeditor-blateq-wrapper",imageSVG:"beromir-toggleeditor-blateq-imageSVG",selected:"beromir-toggleeditor-blateq-selected",highlight:"beromir-toggleeditor-blateq-highlight",colorPreview:"beromir-toggleeditor-blateq-colorPreview",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",label:"beromir-toggleeditor-blateq-label",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",colorButton:"beromir-toggleeditor-blateq-colorButton",colorPreviewLast:"beromir-toggleeditor-blateq-colorPreviewLast",listButton:"beromir-toggleeditor-blateq-listButton",color:"beromir-toggleeditor-blateq-color",disabled:"beromir-toggleeditor-blateq-disabled",grid:"beromir-toggleeditor-blateq-grid",list:"beromir-toggleeditor-blateq-list",loading:"beromir-toggleeditor-blateq-loading",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio"};var tt=h(M()),et=h(E());function P(t){var o,l,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(o=0;o<s;o++)t[o]&&(l=P(t[o]))&&(a&&(a+=" "),a+=l)}else for(l in t)t[l]&&(a&&(a+=" "),a+=l);return a}function yt(){for(var t,o,l=0,a="",s=arguments.length;l<s;l++)(t=arguments[l])&&(o=P(t))&&(a&&(a+=" "),a+=o);return a}var b=yt;var Xt=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),Ot={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,iconSize:null,disabled:!1,dataSourceIdentifier:null,dataSourceUri:null},K=null;function ot(t){let o={...Ot,...t.options},{layout:l,values:a,columns:s,maximalColumns:p,allowEmpty:O,iconSize:lt,disabled:at,dataSourceIdentifier:gt,dataSourceUri:st}=o,{value:f,commit:v,highlight:B,i18nRegistry:u,dataSourcesDataLoader:nt}=t,x=!!(gt||st),[ct,bt]=(0,g.useState)(x),[y,z]=(0,g.useState)(x?[]:Zt(a,l,u));if((0,g.useEffect)(()=>{!x||K===JSON.stringify(o)||(K=JSON.stringify(o),nt.resolveValue(Xt(t),f).then(e=>{if(bt(!1),l==="color"){z(rt(e));return}z(e)}))},[o]),ct)return g.default.createElement("div",{className:b(i.wrapper,i.loading),title:u.translate("Beromir.ToggleEditor:Main:loading")},g.default.createElement(A.Icon,{icon:"spinner",size:"lg",spin:!0}));if(!y||!y.length)return g.default.createElement("div",{className:b(i.wrapper,i.error)},u.translate(`Beromir.ToggleEditor:Main:error.${x?"noDataFromSource":"noNodeTypeDefintion"}`));let dt=u.translate("Beromir.ToggleEditor:Main:reset");function Z(e,c){if(c&&c.blur(),!e||O&&f===e.value){v("");return}v(e.value)}let F=(e,c=0)=>{if(typeof e=="number"&&e>0)return e;let m=y.length||1;if(!e||typeof e!="string")return m;try{return e=e.replaceAll("{items}",m),c&&(e=e.replaceAll("{maximalColumns}",m)),new Function(`return Math.floor(${e})`)()}catch(d){console.warn('An error occurred while trying to evaluate "'+e+`"
`,d)}},ut=()=>{let e=F(s,p),c=F(p);return{"--columns":Math.min(e,c)}},V=e=>e.icon?g.default.createElement(A.Icon,{icon:e.icon,style:{transform:`rotate(${e.iconRotate||0}deg)`},size:lt}):null,X=e=>u.translate(e.description||e.label),w=e=>O&&f===e.value?dt:X(e),W=(e,c=i.allowEmpty)=>O?g.default.createElement("span",{className:b(c,f===e.value&&i.allowEmptyShow)},g.default.createElement(A.Icon,{size:"sm",icon:"times"})):null;return g.default.createElement("div",{className:b(i.wrapper,i[l],at&&i.disabled),style:ut()},y.map(e=>{let c=f===e.value,m=e.disabled,d=u.translate(e.label);switch(l){case"list":return g.default.createElement("button",{onClick:({currentTarget:C})=>Z(e,C),type:"button",title:X(e),"aria-label":w(e),disabled:m,className:b(i.listButton,c&&i.selected)},g.default.createElement("span",{className:b(i.radio,c&&B&&i.highlight)},g.default.createElement("span",null)),V(e),_(e,u),d&&g.default.createElement("span",null,d),W(e,i.allowEmptyRadio));case"color":let mt=e.color.length-1;return g.default.createElement("div",{className:i.colorBox},g.default.createElement("button",{onClick:({currentTarget:C})=>Z(e,C),type:"button",title:X(e),"aria-label":w(e),disabled:m,className:b(i.colorButton,c&&(B?i.highlight:i.selected))},e.color.map((C,H)=>g.default.createElement("span",{key:`color-${H}`,className:b(i.colorPreview,C==="transparent"&&i.colorTransparent,mt===H&&i.colorPreviewLast),style:{backgroundColor:C}})),W(e)),d&&g.default.createElement("span",{className:b(i.label,m&&i.disabled)},d));default:return g.default.createElement(A.Button,{onClick:()=>Z(e),isActive:c,title:X(e),"aria-label":w(e),disabled:m,className:b(i.button,c&&B&&i.highlight)},V(e),_(e,u),d&&g.default.createElement("span",{className:b(e.icon||e.preview?i.label:null)},d),W(e))}}))}ot.propTypes={value:r.default.string,commit:r.default.func.isRequired,i18nRegistry:r.default.object.isRequired,options:r.default.shape({layout:r.default.oneOf(["grid","flex","list","color"]),columns:r.default.oneOfType([r.default.string,r.default.number]),maximalColumns:r.default.oneOfType([r.default.string,r.default.number]),allowEmpty:r.default.bool,iconSize:r.default.oneOf(["xs","sm","lg","2x","3x"]),values:r.default.objectOf(r.default.shape({label:r.default.string,icon:r.default.string,iconRotate:r.default.number,description:r.default.string,color:r.default.oneOfType([r.default.string,r.default.arrayOf(r.default.string)]),hidden:r.default.bool,preview:r.default.string,previewFull:r.default.bool,disabled:r.default.bool})),dataSourceIdentifier:r.default.string,dataSourceUri:r.default.string,dataSourceDisableCaching:r.default.bool,dataSourceAdditionalData:r.default.objectOf(r.default.any)}).isRequired};function rt(t){return Array.isArray(t)?(t=t.map(o=>({...o,color:Bt(o.color)})).filter(o=>o.color),t):[]}function Bt(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function _(t,o){if(!t||!t.preview)return null;let l=t.preview,a=t.previewFull?i.imageFull:null,s=o.translate(t.description||t.label);if(l.startsWith("<svg "))return g.default.createElement("div",{className:b(i.imageSVG,a),"aria-label":s,dangerouslySetInnerHTML:{__html:l}});let p=l.startsWith("resource://")?`/_Resources/Static/Packages/${l.substr(11)}`:l;return g.default.createElement("img",{src:p,className:b(i.image,a),alt:s})}function Zt(t,o,l){if(!t||typeof t!="object")return[];let a=[];for(let s in t){let p=t[s];p.hidden||a.push({...p,value:s})}return o==="color"?rt(a):a}var wt=(0,$.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),Wt=(0,tt.connect)(t=>({focusedNodePath:et.selectors.CR.Nodes.focusedNodePathSelector(t)})),it=wt(Wt(ot));Y("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:it})});})();
//# sourceMappingURL=Plugin.js.map
