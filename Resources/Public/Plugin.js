(()=>{var kt=Object.create;var ct=Object.defineProperty;var jt=Object.getOwnPropertyDescriptor;var Qt=Object.getOwnPropertyNames;var Ut=Object.getPrototypeOf,Tt=Object.prototype.hasOwnProperty;var Et=(t,e)=>()=>(t&&(e=t(t=0)),e);var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Mt=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Qt(e))!Tt.call(t,a)&&a!==r&&ct(t,a,{get:()=>e[a],enumerable:!(i=jt(e,a))||i.enumerable});return t};var f=(t,e,r)=>(r=t!=null?kt(Ut(t)):{},Mt(e||!t||!t.__esModule?ct(r,"default",{value:t,enumerable:!0}):r,t));function m(t){return(...e)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...e);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var y=Et(()=>{});var W=O((we,ut)=>{y();ut.exports=m("vendor")().React});var pt=O((Ve,mt)=>{y();mt.exports=m("vendor")().PropTypes});var Q=O((Ye,It)=>{y();It.exports=m("NeosProjectPackages")().ReactUiComponents});var $=O((Le,ft)=>{y();ft.exports=m("NeosProjectPackages")().NeosUiDecorators});var At=O((De,Ct)=>{y();Ct.exports=m("vendor")().reactRedux});var ht=O((je,Gt)=>{y();Gt.exports=m("NeosProjectPackages")().NeosUiReduxStore});y();var dt=m("manifest");var s=f(W()),n=f(pt()),A=f(Q()),vt=f($());var l={disabled:"beromir-toggleeditor-blateq-disabled",wrapper:"beromir-toggleeditor-blateq-wrapper",flex:"beromir-toggleeditor-blateq-flex",button:"beromir-toggleeditor-blateq-button",colorButton:"beromir-toggleeditor-blateq-colorButton",error:"beromir-toggleeditor-blateq-error","flex-start":"beromir-toggleeditor-blateq-flex-start",list:"beromir-toggleeditor-blateq-list",layered:"beromir-toggleeditor-blateq-layered",imageSVG:"beromir-toggleeditor-blateq-imageSVG",imageFull:"beromir-toggleeditor-blateq-imageFull",content:"beromir-toggleeditor-blateq-content",label:"beromir-toggleeditor-blateq-label",grid:"beromir-toggleeditor-blateq-grid",colorPreviewLast:"beromir-toggleeditor-blateq-colorPreviewLast",selected:"beromir-toggleeditor-blateq-selected",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",colorPreview:"beromir-toggleeditor-blateq-colorPreview",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",radio:"beromir-toggleeditor-blateq-radio",color:"beromir-toggleeditor-blateq-color",loading:"beromir-toggleeditor-blateq-loading",highlight:"beromir-toggleeditor-blateq-highlight",colorBox:"beromir-toggleeditor-blateq-colorBox",image:"beromir-toggleeditor-blateq-image",listButton:"beromir-toggleeditor-blateq-listButton",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",transition:"beromir-toggleeditor-blateq-transition"};var wt=f(At()),zt=f(ht());var v=f(W()),J=f(Q());function yt(t){var e,r,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=yt(t[e]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r);return i}function Pt(){for(var t,e,r=0,i="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=yt(t))&&(i&&(i+=" "),i+=e);return i}var p=Pt;var xt=t=>Bt("preview",t),Xt=t=>Bt("icon",t);function Z(t,e,r=!1,i=c=>c,a=""){let c=`${e}Active${a}`,b=t[e+a],u=t[c];return r&&u===void 0&&(u=b),b==null&&u==null?null:{default:i(b),active:i(u)}}function Zt(t,e){if(!t||typeof t!="object")return[];let r=[];for(let i in t){let a=t[i];a.hidden||r.push({...a,value:i})}return e==="color"?tt(r):r}function tt(t){return Array.isArray(t)?(t=t.map(e=>({...e,color:_t(e.color)})).filter(e=>e.color),t):[]}function _t(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function Bt(t,e){if(!e)return null;let r=Z(e,t);if(!r)return null;let i=r.default&&r.active,a=Z(e,t,!0,u=>`rotate(${u||0}deg)`,"Rotate"),c=Z("label",t,!0),b=Z("description",!0);return{type:t,needLayering:i,state:r,label:c,description:b,rotate:a}}function w({item:t,size:e,isCurrent:r}){let i=Xt(t);if(!i)return null;let{state:a,rotate:c,needLayering:b}=i;return b?v.default.createElement("span",{className:l.layered},v.default.createElement(J.Icon,{icon:a.default,className:l.transition,style:{opacity:r?0:1,transform:c?.default},size:e}),v.default.createElement(J.Icon,{icon:a.active,className:l.transition,style:{opacity:r?1:0,transform:c?.active},size:e})):a.default?v.default.createElement(J.Icon,{icon:a.default,className:l.transition,style:{transform:r?c?.active:c?.default},size:e}):a.active&&r?v.default.createElement(J.Icon,{icon:a.active,style:{transform:c?.active},size:e}):null}var z=f(W());var et=f(W()),Ot=f($());var $t=(0,Ot.neos)(t=>({i18nRegistry:t.get("i18n")})),q=$t(te);function te({src:t,className:e,style:r,label:i,i18nRegistry:a}){let c=a.translate(i);return t.startsWith("<svg ")?et.default.createElement("div",{className:p(r.imageSVG,e),style:r,"aria-label":c,dangerouslySetInnerHTML:{__html:t}}):et.default.createElement("img",{className:p(r.image,e),style:r,alt:c,src:t.startsWith("resource://")?`/_Resources/Static/Packages/${t.substr(11)}`:t})}function V({item:t,isCurrent:e}){let r=xt(t);if(!r)return null;let{state:i,rotate:a,needLayering:c,label:b,description:u}=r,G=t.previewFull?l.imageFull:null;return r.needLayering?z.default.createElement("span",{className:l.layered},z.default.createElement(q,{src:i.default,className:[l.transition,G],style:{opacity:e?0:1,transform:a?.default},label:u?.default||b?.default}),z.default.createElement(q,{src:i.active,className:[l.transition,G],style:{opacity:e?1:0,transform:a?.active},label:u?.active||b?.active})):i.default?z.default.createElement(q,{src:i.default,className:[l.transition,G],style:{transform:e?a?.active:a?.default},label:u?.default||b?.default}):i.active&&e?z.default.createElement(q,{src:i.active,className:[l.transition,G],style:{transform:a?.active},label:u?.active||b?.active}):null}var H=f(W()),Wt=f(Q());function F({children:t,label:e,id:r,className:i,setIdOnWrapper:a=!0,title:c,style:b,renderHelpIcon:u}){return t?H.default.createElement(H.default.Fragment,null,e&&H.default.createElement(Wt.Label,{htmlFor:r},e," ",u()),H.default.createElement("div",{id:a?r:null,className:p(l.wrapper,i),style:b,title:c},t)):null}var ee=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),re={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,multiple:!1,iconSize:null,disabled:!1,hidden:!1,dataSourceIdentifier:null,dataSourceUri:null};function Vt(t){let e={...re,...t.options},{layout:r,values:i,columns:a,maximalColumns:c,iconSize:b,disabled:u,dataSourceIdentifier:G,dataSourceUri:U,dataSourceAdditionalData:rt,multiple:x}=e,T=x||e.allowEmpty,{value:Y,commit:ot,highlight:E,i18nRegistry:X,id:R,dataSourcesDataLoader:Yt,renderHelpIcon:M}=t,K=X.translate(t.label);x&&!Array.isArray(Y)&&console.warn(`Misconfiguration in property "${t.identifier}". Multiple is activated but value type seems to be "string" but should be "array".`);let D=!!(G||U),[Nt,Lt]=(0,s.useState)(D),[N,P]=(0,s.useState)(D?[]:Zt(i,r,X)),[it,lt]=(0,s.useState)(Array.isArray(Y)?Y:[Y]),[St,Jt]=(0,s.useState)(null);if((0,s.useEffect)(()=>{let o=JSON.stringify({dataSourceIdentifier:G,dataSourceUri:U,dataSourceAdditionalData:rt});!D||St===o||(Jt(o),Yt.resolveValue(ee(t),Y).then(d=>{if(Lt(!1),d.hidden){P({hidden:!0});return}if(r==="color"){P(tt(d));return}P(d)}))},[G,U,rt]),Nt)return s.default.createElement(F,{id:R,label:K,className:l.loading,title:X.translate("Beromir.ToggleEditor:Main:loading"),renderHelpIcon:M},s.default.createElement(A.Icon,{icon:"spinner",size:"lg",spin:!0}));if(N.hidden)return null;if(!N||!N.length)return s.default.createElement(F,{id:R,label:K,className:l.error,renderHelpIcon:M},X.translate(`Beromir.ToggleEditor:Main:error.${D?"noDataFromSource":"noNodeTypeDefintion"}`));function at(o){return it.includes(o.value)}function k(o,d){if(d&&d.blur(),!o){ot(x?[]:""),lt([]);return}let I=o.value,g=[...it],h=g.includes(I);x?h?g.splice(g.indexOf(I),1):g.push(I):g=h?[]:[I],!(!T&&g.length===0)&&(lt(g),x||(g=g[0]||""),ot(g))}let st=(o,d=0)=>{if(typeof o=="number"&&o>0)return o;let I=N.length||1;if(!o||typeof o!="string")return I;try{return o=o.replaceAll("{items}",I),d&&(o=o.replaceAll("{maximalColumns}",I)),new Function(`return Math.floor(${o})`)()}catch(g){console.warn('An error occurred while trying to evaluate "'+o+`"
`,g)}},qt=()=>{let o=st(a,c),d=st(c);return{"--columns":Math.min(o,d)}},Ht=X.translate("Beromir.ToggleEditor:Main:reset"),_=({item:o,className:d=l.allowEmpty})=>T&&!x?s.default.createElement("span",{className:p(d,at(o)&&l.allowEmptyShow)},s.default.createElement(A.Icon,{size:"sm",icon:"times"})):null;return s.default.createElement(F,{id:R,label:K,className:[l[r],u&&l.disabled],style:qt(),setIdOnWrapper:!1,renderHelpIcon:M},N.map((o,d)=>{let I=d===0?R:null,g=at(o),h=o.disabled,nt=g?"active":"default",Rt=Z(o,"label",!0,S=>X.translate(S)),Dt=Z(o,"description",!0,S=>X.translate(S)),C=Rt?.[nt],L=Dt?.[nt]||C,j=g&&T?Ht:L;switch(r){case"list":return x?s.default.createElement(A.Label,{id:I,className:l.listButton,title:L,"aria-label":j,key:d},s.default.createElement(A.CheckBox,{isChecked:g,disabled:h,onChange:()=>k(o)}),s.default.createElement(w,{item:o,isCurrent:g,size:b}),s.default.createElement(V,{item:o,isCurrent:g}),C&&s.default.createElement("span",null,C)):s.default.createElement("button",{id:I,onClick:({currentTarget:B})=>k(o,B),type:"button",title:L,"aria-label":j,disabled:h,className:p(l.listButton,g&&l.selected),key:d},s.default.createElement("span",{className:p(l.radio,g&&E&&l.highlight)},s.default.createElement("span",null)),s.default.createElement(w,{item:o,isCurrent:g,size:b}),s.default.createElement(V,{item:o,isCurrent:g}),C&&s.default.createElement("span",null,C),s.default.createElement(_,{item:o,className:l.allowEmptyRadio}));case"color":let S=o.color.length-1;return s.default.createElement("div",{className:l.colorBox,key:d},s.default.createElement("button",{id:I,onClick:({currentTarget:B})=>k(o,B),type:"button",title:L,"aria-label":j,disabled:h,className:p(l.colorButton,g&&(E?l.highlight:l.selected))},o.color.map((B,gt)=>s.default.createElement("span",{key:`color-${gt}`,className:p(l.colorPreview,B==="transparent"&&l.colorTransparent,S===gt&&l.colorPreviewLast),style:{backgroundColor:B}})),s.default.createElement(_,{item:o})),C&&s.default.createElement("span",{className:p(l.label,h&&l.disabled)},C));default:return s.default.createElement(A.Button,{id:I,onClick:()=>k(o),isActive:g,title:L,"aria-label":j,disabled:h,className:p(l.button,g&&E&&l.highlight),key:d},s.default.createElement(w,{item:o,isCurrent:g,size:b}),s.default.createElement(V,{item:o,isCurrent:g}),C&&s.default.createElement("span",{className:p(o.icon||o.preview?l.label:null)},C),s.default.createElement(_,{item:o}))}}))}Vt.propTypes={value:n.default.string,commit:n.default.func.isRequired,i18nRegistry:n.default.object.isRequired,options:n.default.shape({layout:n.default.oneOf(["grid","flex","flex-start","list","color"]),columns:n.default.oneOfType([n.default.string,n.default.number]),maximalColumns:n.default.oneOfType([n.default.string,n.default.number]),allowEmpty:n.default.bool,multiple:n.default.bool,iconSize:n.default.oneOf(["xs","sm","lg","2x","3x"]),values:n.default.objectOf(n.default.shape({label:n.default.string,icon:n.default.string,iconRotate:n.default.number,description:n.default.string,color:n.default.oneOfType([n.default.string,n.default.arrayOf(n.default.string)]),hidden:n.default.bool,preview:n.default.string,previewFull:n.default.bool,disabled:n.default.bool})),dataSourceIdentifier:n.default.string,dataSourceUri:n.default.string,dataSourceDisableCaching:n.default.bool,dataSourceAdditionalData:n.default.objectOf(n.default.any)}).isRequired};var oe=(0,vt.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),ie=(0,wt.connect)(t=>({focusedNodePath:zt.selectors.CR.Nodes.focusedNodePathSelector(t)})),Ft=oe(ie(Vt));dt("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:Ft,hasOwnLabel:!0})});})();
//# sourceMappingURL=Plugin.js.map
