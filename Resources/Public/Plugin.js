(()=>{var ut=Object.create;var N=Object.defineProperty;var mt=Object.getOwnPropertyDescriptor;var It=Object.getOwnPropertyNames;var pt=Object.getPrototypeOf,Ct=Object.prototype.hasOwnProperty;var At=(t,o)=>()=>(t&&(o=t(t=0)),o);var A=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports);var ft=(t,o,i,l)=>{if(o&&typeof o=="object"||typeof o=="function")for(let s of It(o))!Ct.call(t,s)&&s!==i&&N(t,s,{get:()=>o[s],enumerable:!(l=mt(o,s))||l.enumerable});return t};var f=(t,o,i)=>(i=t!=null?ut(pt(t)):{},ft(o||!t||!t.__esModule?N(i,"default",{value:t,enumerable:!0}):i,t));function n(t){return(...o)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...o);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var p=At(()=>{});var S=A(($t,R)=>{p();R.exports=n("vendor")().React});var q=A((ee,H)=>{p();H.exports=n("vendor")().PropTypes});var L=A((re,k)=>{p();k.exports=n("NeosProjectPackages")().ReactUiComponents});var j=A((le,U)=>{p();U.exports=n("NeosProjectPackages")().NeosUiDecorators});var J=A((be,D)=>{p();D.exports=n("vendor")().reactRedux});var Q=A((ue,T)=>{p();T.exports=n("NeosProjectPackages")().NeosUiReduxStore});p();var V=n("manifest");var g=f(S()),r=f(q()),h=f(L()),P=f(j());var a={list:"beromir-toggleeditor-blateq-list",radio:"beromir-toggleeditor-blateq-radio",highlight:"beromir-toggleeditor-blateq-highlight",disabled:"beromir-toggleeditor-blateq-disabled",imageSVG:"beromir-toggleeditor-blateq-imageSVG",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",grid:"beromir-toggleeditor-blateq-grid",error:"beromir-toggleeditor-blateq-error",selected:"beromir-toggleeditor-blateq-selected",label:"beromir-toggleeditor-blateq-label",button:"beromir-toggleeditor-blateq-button",loading:"beromir-toggleeditor-blateq-loading",flex:"beromir-toggleeditor-blateq-flex",listButton:"beromir-toggleeditor-blateq-listButton",colorBox:"beromir-toggleeditor-blateq-colorBox",imageFull:"beromir-toggleeditor-blateq-imageFull",wrapper:"beromir-toggleeditor-blateq-wrapper",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",colorButton:"beromir-toggleeditor-blateq-colorButton",image:"beromir-toggleeditor-blateq-image",color:"beromir-toggleeditor-blateq-color",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio"};var _=f(J()),$=f(Q());function E(t){var o,i,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(o=0;o<s;o++)t[o]&&(i=E(t[o]))&&(l&&(l+=" "),l+=i)}else for(i in t)t[i]&&(l&&(l+=" "),l+=i);return l}function xt(){for(var t,o,i=0,l="",s=arguments.length;i<s;i++)(t=arguments[i])&&(o=E(t))&&(l&&(l+=" "),l+=o);return l}var b=xt;var Gt=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),yt={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,iconSize:null,disabled:!1,dataSourceIdentifier:null,dataSourceUri:null},M=null;function tt(t){let o={...yt,...t.options},{layout:i,values:l,columns:s,maximalColumns:d,allowEmpty:C,iconSize:rt,disabled:it,dataSourceIdentifier:lt,dataSourceUri:at}=o,{value:x,commit:w,highlight:X,i18nRegistry:m,dataSourcesDataLoader:gt}=t,G=!!(lt||at),[st,nt]=(0,g.useState)(G),[y,v]=(0,g.useState)(G?[]:Ot(l,i,m));if((0,g.useEffect)(()=>{!G||M===JSON.stringify(o)||(M=JSON.stringify(o),gt.resolveValue(Gt(t),x).then(e=>{if(nt(!1),i==="color"){v(et(e));return}v(e)}))},[o]),st)return g.default.createElement("div",{className:b(a.wrapper,a.loading),title:m.translate("Beromir.ToggleEditor:Main:loading")},g.default.createElement(h.Icon,{icon:"spinner",size:"lg",spin:!0}));if(!y||!y.length)return g.default.createElement("div",{className:b(a.wrapper,a.error)},m.translate(`Beromir.ToggleEditor:Main:error.${G?"noDataFromSource":"noNodeTypeDefintion"}`));let ct=m.translate("Beromir.ToggleEditor:Main:reset");function B(e,c){if(c&&c.blur(),!e||C&&x===e.value){w("");return}w(e.value)}let z=(e,c=0)=>{if(typeof e=="number"&&e>0)return e;let I=y.length||1;if(!e||typeof e!="string")return I;try{return e=e.replaceAll("{items}",I),c&&(e=e.replaceAll("{maximalColumns}",I)),new Function(`return Math.floor(${e})`)()}catch(u){console.warn('An error occurred while trying to evaluate "'+e+`"
`,u)}},bt=()=>{let e=z(s,d),c=z(d);return{"--columns":Math.min(e,c)}},F=e=>e.icon?g.default.createElement(h.Icon,{icon:e.icon,style:{transform:`rotate(${e.iconRotate||0}deg)`},size:rt}):null,O=e=>C&&x===e.value?ct:m.translate(e.description||e.label),Z=(e,c=a.allowEmpty)=>C?g.default.createElement("div",{className:b(c,x===e.value&&a.allowEmptyShow)},g.default.createElement(h.Icon,{size:"sm",icon:"times"})):null;return g.default.createElement("div",{className:b(a.wrapper,a[i],it&&a.disabled),style:bt()},y.map(e=>{let c=x===e.value,I=e.disabled,u=m.translate(e.label);switch(i){case"list":return g.default.createElement("button",{onClick:({currentTarget:W})=>B(e,W),type:"button",title:O(e),disabled:I,className:b(a.listButton,c&&a.selected)},g.default.createElement("span",{className:b(a.radio,c&&X&&a.highlight)},g.default.createElement("span",null)),F(e),K(e,m),u&&g.default.createElement("span",null,u),Z(e,a.allowEmptyRadio));case"color":let dt=e.color.length===1&&e.color[0]==="transparent";return g.default.createElement("div",{className:a.colorBox},g.default.createElement("button",{onClick:({currentTarget:W})=>B(e,W),type:"button",title:O(e),disabled:I,className:b(a.colorButton,c&&(X?a.highlight:a.selected),dt&&a.colorTransparent),style:Bt(e.color)},Z(e)),u&&g.default.createElement("span",{className:b(a.label,I&&a.disabled)},u));default:return g.default.createElement(h.Button,{onClick:()=>B(e),isActive:c,title:O(e),disabled:I,className:b(a.button,c&&X&&a.highlight)},F(e),K(e,m),u&&g.default.createElement("span",{className:b(e.icon||e.preview?a.label:null)},u),Z(e))}}))}tt.propTypes={value:r.default.string,commit:r.default.func.isRequired,i18nRegistry:r.default.object.isRequired,options:r.default.shape({layout:r.default.oneOf(["grid","flex","list","color"]),columns:r.default.oneOfType([r.default.string,r.default.number]),maximalColumns:r.default.oneOfType([r.default.string,r.default.number]),allowEmpty:r.default.bool,iconSize:r.default.oneOf(["xs","sm","lg","2x","3x"]),values:r.default.objectOf(r.default.shape({label:r.default.string,icon:r.default.string,iconRotate:r.default.number,description:r.default.string,color:r.default.oneOfType([r.default.string,r.default.arrayOf(r.default.string)]),hidden:r.default.bool,preview:r.default.string,previewFull:r.default.bool,disabled:r.default.bool})),dataSourceIdentifier:r.default.string,dataSourceUri:r.default.string,dataSourceDisableCaching:r.default.bool,dataSourceAdditionalData:r.default.objectOf(r.default.any)}).isRequired};function et(t){return Array.isArray(t)?(t=t.map(o=>({...o,color:Xt(o.color)})).filter(o=>o.color),t):[]}function Xt(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function Bt(t){let o=t.length;if(o===1)return{backgroundColor:t[0]};let i="",l=[];return t.forEach((s,d)=>{let C=`${Math.round(d/o*100)}%`;i&&l.push(`${i} ${C}`),i=s,l.push(`${s} ${C}`)}),l.push(`${i} 100%`),{backgroundImage:`linear-gradient(90deg, ${l.join(", ")})`}}function K(t,o){if(!t||!t.preview)return null;let i=t.preview,l=t.previewFull?a.imageFull:null,s=o.translate(t.description||t.label);if(i.startsWith("<svg "))return g.default.createElement("div",{className:b(a.imageSVG,l),"aria-label":s,dangerouslySetInnerHTML:{__html:i}});let d=i.startsWith("resource://")?`/_Resources/Static/Packages/${i.substr(11)}`:i;return g.default.createElement("img",{src:d,className:b(a.image,l),alt:s})}function Ot(t,o,i){if(!t||typeof t!="object")return[];let l=[];for(let s in t){let d=t[s];d.hidden||l.push({...d,value:s})}return o==="color"?et(l):l}var Zt=(0,P.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),Wt=(0,_.connect)(t=>({focusedNodePath:$.selectors.CR.Nodes.focusedNodePathSelector(t)})),ot=Zt(Wt(tt));V("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:ot})});})();
//# sourceMappingURL=Plugin.js.map
