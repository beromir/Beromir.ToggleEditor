(()=>{var xt=Object.create;var q=Object.defineProperty;var Gt=Object.getOwnPropertyDescriptor;var Xt=Object.getOwnPropertyNames;var yt=Object.getPrototypeOf,Bt=Object.prototype.hasOwnProperty;var Ot=(t,o)=>()=>(t&&(o=t(t=0)),o);var x=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports);var vt=(t,o,a,g)=>{if(o&&typeof o=="object"||typeof o=="function")for(let s of Xt(o))!Bt.call(t,s)&&s!==a&&q(t,s,{get:()=>o[s],enumerable:!(g=Gt(o,s))||g.enumerable});return t};var G=(t,o,a)=>(a=t!=null?xt(yt(t)):{},vt(o||!t||!t.__esModule?q(a,"default",{value:t,enumerable:!0}):a,t));function n(t){return(...o)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...o);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var I=Ot(()=>{});var U=x((ae,D)=>{I();D.exports=n("vendor")().React});var M=x((se,T)=>{I();T.exports=n("vendor")().PropTypes});var K=x((ce,E)=>{I();E.exports=n("NeosProjectPackages")().ReactUiComponents});var _=x((de,P)=>{I();P.exports=n("NeosProjectPackages")().NeosUiDecorators});var tt=x((Ae,$)=>{I();$.exports=n("vendor")().reactRedux});var ot=x((fe,et)=>{I();et.exports=n("NeosProjectPackages")().NeosUiReduxStore});I();var Q=n("manifest");var r=G(U()),i=G(M()),d=G(K()),lt=G(_());var l={colorBox:"beromir-toggleeditor-blateq-colorBox",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",highlight:"beromir-toggleeditor-blateq-highlight",button:"beromir-toggleeditor-blateq-button",wrapper:"beromir-toggleeditor-blateq-wrapper",selected:"beromir-toggleeditor-blateq-selected",loading:"beromir-toggleeditor-blateq-loading",image:"beromir-toggleeditor-blateq-image",colorButton:"beromir-toggleeditor-blateq-colorButton",imageFull:"beromir-toggleeditor-blateq-imageFull",label:"beromir-toggleeditor-blateq-label",flex:"beromir-toggleeditor-blateq-flex",color:"beromir-toggleeditor-blateq-color",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",colorPreviewLast:"beromir-toggleeditor-blateq-colorPreviewLast",disabled:"beromir-toggleeditor-blateq-disabled",grid:"beromir-toggleeditor-blateq-grid",imageSVG:"beromir-toggleeditor-blateq-imageSVG",list:"beromir-toggleeditor-blateq-list",radio:"beromir-toggleeditor-blateq-radio",error:"beromir-toggleeditor-blateq-error",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",colorPreview:"beromir-toggleeditor-blateq-colorPreview",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",listButton:"beromir-toggleeditor-blateq-listButton"};var at=G(tt()),gt=G(ot());function rt(t){var o,a,g="";if(typeof t=="string"||typeof t=="number")g+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(o=0;o<s;o++)t[o]&&(a=rt(t[o]))&&(g&&(g+=" "),g+=a)}else for(a in t)t[a]&&(g&&(g+=" "),g+=a);return g}function wt(){for(var t,o,a=0,g="",s=arguments.length;a<s;a++)(t=arguments[a])&&(o=rt(t))&&(g&&(g+=" "),g+=o);return g}var c=wt;var Wt=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),zt={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,iconSize:null,disabled:!1,hidden:!1,dataSourceIdentifier:null,dataSourceUri:null};function st(t){let o={...zt,...t.options},{layout:a,values:g,columns:s,maximalColumns:p,allowEmpty:Z,iconSize:bt,disabled:dt,dataSourceIdentifier:w,dataSourceUri:W,dataSourceAdditionalData:S}=o,{value:X,commit:k,highlight:z,i18nRegistry:u,id:A,dataSourcesDataLoader:ut}=t,V=u.translate(t.label),B=!!(w||W),[mt,It]=(0,r.useState)(B),[y,R]=(0,r.useState)(B?[]:Ft(g,a,u)),[pt,Ct]=(0,r.useState)(null);if((0,r.useEffect)(()=>{let e=JSON.stringify({dataSourceIdentifier:w,dataSourceUri:W,dataSourceAdditionalData:S});!B||pt===e||(Ct(e),ut.resolveValue(Wt(t),X).then(b=>{if(It(!1),a==="color"){R(nt(b));return}R(b)}))},[w,W,S]),mt)return r.default.createElement(r.default.Fragment,null,r.default.createElement(d.Label,{htmlFor:A},V),r.default.createElement("div",{id:A,className:c(l.wrapper,l.loading),title:u.translate("Beromir.ToggleEditor:Main:loading")},r.default.createElement(d.Icon,{icon:"spinner",size:"lg",spin:!0})));if(y.hidden)return null;if(!y||!y.length)return r.default.createElement(r.default.Fragment,null,r.default.createElement(d.Label,{htmlFor:A},V),r.default.createElement("div",{id:A,className:c(l.wrapper,l.error)},u.translate(`Beromir.ToggleEditor:Main:error.${B?"noDataFromSource":"noNodeTypeDefintion"}`)));let At=u.translate("Beromir.ToggleEditor:Main:reset");function F(e,b){if(b&&b.blur(),!e||Z&&X===e.value){k("");return}k(e.value)}let L=(e,b=0)=>{if(typeof e=="number"&&e>0)return e;let C=y.length||1;if(!e||typeof e!="string")return C;try{return e=e.replaceAll("{items}",C),b&&(e=e.replaceAll("{maximalColumns}",C)),new Function(`return Math.floor(${e})`)()}catch(m){console.warn('An error occurred while trying to evaluate "'+e+`"
`,m)}},ht=()=>{let e=L(s,p),b=L(p);return{"--columns":Math.min(e,b)}},H=e=>e.icon?r.default.createElement(d.Icon,{icon:e.icon,style:{transform:`rotate(${e.iconRotate||0}deg)`},size:bt}):null,O=e=>u.translate(e.description||e.label),Y=e=>Z&&X===e.value?At:O(e),N=(e,b=l.allowEmpty)=>Z?r.default.createElement("span",{className:c(b,X===e.value&&l.allowEmptyShow)},r.default.createElement(d.Icon,{size:"sm",icon:"times"})):null;return r.default.createElement(r.default.Fragment,null,r.default.createElement(d.Label,{htmlFor:A},V),r.default.createElement("div",{className:c(l.wrapper,l[a],dt&&l.disabled),style:ht()},y.map((e,b)=>{let C=b===0?A:null,m=X===e.value,v=e.disabled,h=u.translate(e.label);switch(a){case"list":return r.default.createElement("button",{id:C,onClick:({currentTarget:f})=>F(e,f),type:"button",title:O(e),"aria-label":Y(e),disabled:v,className:c(l.listButton,m&&l.selected)},r.default.createElement("span",{className:c(l.radio,m&&z&&l.highlight)},r.default.createElement("span",null)),H(e),it(e,u),h&&r.default.createElement("span",null,h),N(e,l.allowEmptyRadio));case"color":let ft=e.color.length-1;return r.default.createElement("div",{className:l.colorBox},r.default.createElement("button",{id:C,onClick:({currentTarget:f})=>F(e,f),type:"button",title:O(e),"aria-label":Y(e),disabled:v,className:c(l.colorButton,m&&(z?l.highlight:l.selected))},e.color.map((f,j)=>r.default.createElement("span",{key:`color-${j}`,className:c(l.colorPreview,f==="transparent"&&l.colorTransparent,ft===j&&l.colorPreviewLast),style:{backgroundColor:f}})),N(e)),h&&r.default.createElement("span",{className:c(l.label,v&&l.disabled)},h));default:return r.default.createElement(d.Button,{id:C,onClick:()=>F(e),isActive:m,title:O(e),"aria-label":Y(e),disabled:v,className:c(l.button,m&&z&&l.highlight)},H(e),it(e,u),h&&r.default.createElement("span",{className:c(e.icon||e.preview?l.label:null)},h),N(e))}})))}st.propTypes={value:i.default.string,commit:i.default.func.isRequired,i18nRegistry:i.default.object.isRequired,options:i.default.shape({layout:i.default.oneOf(["grid","flex","list","color"]),columns:i.default.oneOfType([i.default.string,i.default.number]),maximalColumns:i.default.oneOfType([i.default.string,i.default.number]),allowEmpty:i.default.bool,iconSize:i.default.oneOf(["xs","sm","lg","2x","3x"]),values:i.default.objectOf(i.default.shape({label:i.default.string,icon:i.default.string,iconRotate:i.default.number,description:i.default.string,color:i.default.oneOfType([i.default.string,i.default.arrayOf(i.default.string)]),hidden:i.default.bool,preview:i.default.string,previewFull:i.default.bool,disabled:i.default.bool})),dataSourceIdentifier:i.default.string,dataSourceUri:i.default.string,dataSourceDisableCaching:i.default.bool,dataSourceAdditionalData:i.default.objectOf(i.default.any)}).isRequired};function nt(t){return Array.isArray(t)?(t=t.map(o=>({...o,color:Vt(o.color)})).filter(o=>o.color),t):[]}function Vt(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function it(t,o){if(!t||!t.preview)return null;let a=t.preview,g=t.previewFull?l.imageFull:null,s=o.translate(t.description||t.label);if(a.startsWith("<svg "))return r.default.createElement("div",{className:c(l.imageSVG,g),"aria-label":s,dangerouslySetInnerHTML:{__html:a}});let p=a.startsWith("resource://")?`/_Resources/Static/Packages/${a.substr(11)}`:a;return r.default.createElement("img",{src:p,className:c(l.image,g),alt:s})}function Ft(t,o,a){if(!t||typeof t!="object")return[];let g=[];for(let s in t){let p=t[s];p.hidden||g.push({...p,value:s})}return o==="color"?nt(g):g}var Yt=(0,lt.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),Nt=(0,at.connect)(t=>({focusedNodePath:gt.selectors.CR.Nodes.focusedNodePathSelector(t)})),ct=Yt(Nt(st));Q("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:ct,hasOwnLabel:!0})});})();
//# sourceMappingURL=Plugin.js.map
