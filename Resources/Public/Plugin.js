(()=>{var ct=Object.create;var V=Object.defineProperty;var bt=Object.getOwnPropertyDescriptor;var dt=Object.getOwnPropertyNames;var ut=Object.getPrototypeOf,mt=Object.prototype.hasOwnProperty;var It=(t,o)=>()=>(t&&(o=t(t=0)),o);var p=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports);var pt=(t,o,l,g)=>{if(o&&typeof o=="object"||typeof o=="function")for(let a of dt(o))!mt.call(t,a)&&a!==l&&V(t,a,{get:()=>o[a],enumerable:!(g=bt(o,a))||g.enumerable});return t};var C=(t,o,l)=>(l=t!=null?ct(ut(t)):{},pt(o||!t||!t.__esModule?V(l,"default",{value:t,enumerable:!0}):l,t));function n(t){return(...o)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...o);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var I=It(()=>{});var S=p((Et,N)=>{I();N.exports=n("vendor")().React});var R=p((Kt,H)=>{I();H.exports=n("vendor")().PropTypes});var k=p((_t,q)=>{I();q.exports=n("NeosProjectPackages")().ReactUiComponents});var D=p((te,L)=>{I();L.exports=n("NeosProjectPackages")().NeosUiDecorators});var j=p((ge,J)=>{I();J.exports=n("vendor")().reactRedux});var U=p((ae,T)=>{I();T.exports=n("NeosProjectPackages")().NeosUiReduxStore});I();var Y=n("manifest");var s=C(S()),r=C(R()),A=C(k()),M=C(D());var i={highlight:"beromir-toggleeditor-blateq-highlight",flex:"beromir-toggleeditor-blateq-flex",imageSVG:"beromir-toggleeditor-blateq-imageSVG",grid:"beromir-toggleeditor-blateq-grid",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",selected:"beromir-toggleeditor-blateq-selected",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",loading:"beromir-toggleeditor-blateq-loading",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",disabled:"beromir-toggleeditor-blateq-disabled",error:"beromir-toggleeditor-blateq-error",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",wrapper:"beromir-toggleeditor-blateq-wrapper",color:"beromir-toggleeditor-blateq-color",label:"beromir-toggleeditor-blateq-label",image:"beromir-toggleeditor-blateq-image",radio:"beromir-toggleeditor-blateq-radio",colorBox:"beromir-toggleeditor-blateq-colorBox",listButton:"beromir-toggleeditor-blateq-listButton",list:"beromir-toggleeditor-blateq-list",button:"beromir-toggleeditor-blateq-button",imageFull:"beromir-toggleeditor-blateq-imageFull",colorButton:"beromir-toggleeditor-blateq-colorButton"};var K=C(j()),P=C(U());function Q(t){var o,l,g="";if(typeof t=="string"||typeof t=="number")g+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(o=0;o<a;o++)t[o]&&(l=Q(t[o]))&&(g&&(g+=" "),g+=l)}else for(l in t)t[l]&&(g&&(g+=" "),g+=l);return g}function At(){for(var t,o,l=0,g="",a=arguments.length;l<a;l++)(t=arguments[l])&&(o=Q(t))&&(g&&(g+=" "),g+=o);return g}var b=At;var ht=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),ft={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,iconSize:null,disabled:!1,dataSourceIdentifier:null,dataSourceUri:null};function _(t){let o={...ft,...t.options},{layout:l,values:g,columns:a,maximalColumns:f,allowEmpty:y,iconSize:tt,disabled:et,dataSourceIdentifier:ot,dataSourceUri:rt}=o,{value:h,commit:W,highlight:X,i18nRegistry:u,dataSourcesDataLoader:it}=t,x=!!(ot||rt),[lt,gt]=(0,s.useState)(x),[G,st]=(0,s.useState)(x?[]:xt(g,u));if((0,s.useEffect)(()=>{x&&it.resolveValue(ht(t),h).then(e=>{gt(!1),st(e)})},[o]),lt)return s.default.createElement("div",{className:b(i.wrapper,i.loading),title:u.translate("Beromir.ToggleEditor:Main:loading")},s.default.createElement(A.Icon,{icon:"spinner",size:"lg",spin:!0}));if(!G||!G.length)return s.default.createElement("div",{className:b(i.wrapper,i.error)},u.translate(`Beromir.ToggleEditor:Main:error.${x?"noDataFromSource":"noNodeTypeDefintion"}`));let at=u.translate("Beromir.ToggleEditor:Main:reset");function B(e,c){if(c&&c.blur(),!e||y&&h===e.value){W("");return}W(e.value)}let w=(e,c=0)=>{if(typeof e=="number"&&e>0)return e;let m=G.length||1;if(!e||typeof e!="string")return m;try{return e=e.replaceAll("{items}",m),c&&(e=e.replaceAll("{maximalColumns}",m)),new Function(`return Math.floor(${e})`)()}catch(d){console.warn('An error occurred while trying to evaluate "'+e+`"
`,d)}},nt=()=>{let e=w(a,f),c=w(f);return{"--columns":Math.min(e,c)}},z=e=>e.icon?s.default.createElement(A.Icon,{icon:e.icon,style:{transform:`rotate(${e.iconRotate||0}deg)`},size:tt}):null,O=e=>y&&h===e.value?at:u.translate(e.description||e.label),Z=(e,c=i.allowEmpty)=>y?s.default.createElement("div",{className:b(c,h===e.value&&i.allowEmptyShow)},s.default.createElement(A.Icon,{size:"sm",icon:"times"})):null;return s.default.createElement("div",{className:b(i.wrapper,i[l],et&&i.disabled),style:nt()},G.map(e=>{let c=h===e.value,m=e.disabled,d=u.translate(e.label);switch(l){case"list":return s.default.createElement("button",{onClick:({currentTarget:v})=>B(e,v),type:"button",title:O(e),disabled:m,className:b(i.listButton,c&&i.selected)},s.default.createElement("span",{className:b(i.radio,c&&X&&i.highlight)},s.default.createElement("span",null)),z(e),E(e,u),d&&s.default.createElement("span",null,d),Z(e,i.allowEmptyRadio));case"color":return s.default.createElement("div",{className:i.colorBox},s.default.createElement("button",{onClick:({currentTarget:v})=>B(e,v),type:"button",title:O(e),disabled:m,className:b(i.colorButton,c&&(X?i.highlight:i.selected),e.color==="transparent"&&i.colorTransparent),style:{backgroundColor:e.color}},Z(e)),d&&s.default.createElement("span",{className:b(i.label,m&&i.disabled)},d));default:return s.default.createElement(A.Button,{onClick:()=>B(e),isActive:c,title:O(e),disabled:m,className:b(i.button,c&&X&&i.highlight)},z(e),E(e,u),d&&s.default.createElement("span",{className:b(e.icon||e.preview?i.label:null)},d),Z(e))}}))}_.propTypes={value:r.default.string,commit:r.default.func.isRequired,i18nRegistry:r.default.object.isRequired,options:r.default.shape({layout:r.default.oneOf(["grid","flex","list","color"]),columns:r.default.oneOfType([r.default.string,r.default.number]),maximalColumns:r.default.oneOfType([r.default.string,r.default.number]),allowEmpty:r.default.bool,iconSize:r.default.oneOf(["xs","sm","lg","2x","3x"]),values:r.default.objectOf(r.default.shape({label:r.default.string,icon:r.default.string,iconRotate:r.default.number,description:r.default.string,color:r.default.string,hidden:r.default.bool,preview:r.default.string,previewFull:r.default.bool,disabled:r.default.bool})),dataSourceIdentifier:r.default.string,dataSourceUri:r.default.string,dataSourceDisableCaching:r.default.bool,dataSourceAdditionalData:r.default.objectOf(r.default.any)}).isRequired};function E(t,o){if(!t||!t.preview)return null;let l=t.preview,g=t.previewFull?i.imageFull:null,a=o.translate(t.description||t.label);if(l.startsWith("<svg "))return s.default.createElement("div",{className:b(i.imageSVG,g),"aria-label":a,dangerouslySetInnerHTML:{__html:l}});let f=l.startsWith("resource://")?`/_Resources/Static/Packages/${l.substr(11)}`:l;return s.default.createElement("img",{src:f,className:b(i.image,g),alt:a})}function xt(t,o){if(!t||typeof t!="object")return[];let l=[];for(let g in t){let a=t[g];a.hidden||l.push({...a,value:g})}return l}var Gt=(0,M.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),yt=(0,K.connect)(t=>({focusedNodePath:P.selectors.CR.Nodes.focusedNodePathSelector(t)})),$=Gt(yt(_));Y("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:$})});})();
//# sourceMappingURL=Plugin.js.map
