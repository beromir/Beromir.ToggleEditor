(()=>{var ft=Object.create;var q=Object.defineProperty;var xt=Object.getOwnPropertyDescriptor;var yt=Object.getOwnPropertyNames;var Xt=Object.getPrototypeOf,Ot=Object.prototype.hasOwnProperty;var Bt=(t,o)=>()=>(t&&(o=t(t=0)),o);var f=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports);var Zt=(t,o,a,g)=>{if(o&&typeof o=="object"||typeof o=="function")for(let s of yt(o))!Ot.call(t,s)&&s!==a&&q(t,s,{get:()=>o[s],enumerable:!(g=xt(o,s))||g.enumerable});return t};var x=(t,o,a)=>(a=t!=null?ft(Xt(t)):{},Zt(o||!t||!t.__esModule?q(a,"default",{value:t,enumerable:!0}):a,t));function n(t){return(...o)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...o);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var I=Bt(()=>{});var U=f((ae,j)=>{I();j.exports=n("vendor")().React});var E=f((se,T)=>{I();T.exports=n("vendor")().PropTypes});var P=f((ce,M)=>{I();M.exports=n("NeosProjectPackages")().ReactUiComponents});var _=f((de,K)=>{I();K.exports=n("NeosProjectPackages")().NeosUiDecorators});var tt=f((Ge,$)=>{I();$.exports=n("vendor")().reactRedux});var ot=f((Ae,et)=>{I();et.exports=n("NeosProjectPackages")().NeosUiReduxStore});I();var Q=n("manifest");var r=x(U()),i=x(E()),d=x(P()),lt=x(_());var l={button:"beromir-toggleeditor-blateq-button",label:"beromir-toggleeditor-blateq-label",error:"beromir-toggleeditor-blateq-error",loading:"beromir-toggleeditor-blateq-loading",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",colorBox:"beromir-toggleeditor-blateq-colorBox",colorPreview:"beromir-toggleeditor-blateq-colorPreview",highlight:"beromir-toggleeditor-blateq-highlight",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",imageFull:"beromir-toggleeditor-blateq-imageFull",colorButton:"beromir-toggleeditor-blateq-colorButton",image:"beromir-toggleeditor-blateq-image",disabled:"beromir-toggleeditor-blateq-disabled",listButton:"beromir-toggleeditor-blateq-listButton",colorPreviewLast:"beromir-toggleeditor-blateq-colorPreviewLast",color:"beromir-toggleeditor-blateq-color",grid:"beromir-toggleeditor-blateq-grid",list:"beromir-toggleeditor-blateq-list",flex:"beromir-toggleeditor-blateq-flex",imageSVG:"beromir-toggleeditor-blateq-imageSVG",radio:"beromir-toggleeditor-blateq-radio",selected:"beromir-toggleeditor-blateq-selected",wrapper:"beromir-toggleeditor-blateq-wrapper"};var at=x(tt()),gt=x(ot());function rt(t){var o,a,g="";if(typeof t=="string"||typeof t=="number")g+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(o=0;o<s;o++)t[o]&&(a=rt(t[o]))&&(g&&(g+=" "),g+=a)}else for(a in t)t[a]&&(g&&(g+=" "),g+=a);return g}function Wt(){for(var t,o,a=0,g="",s=arguments.length;a<s;a++)(t=arguments[a])&&(o=rt(t))&&(g&&(g+=" "),g+=o);return g}var c=Wt;var vt=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),zt={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,iconSize:null,disabled:!1,hidden:!1,dataSourceIdentifier:null,dataSourceUri:null};function st(t){let o={...zt,...t.options},{layout:a,values:g,columns:s,maximalColumns:p,allowEmpty:w,iconSize:bt,disabled:dt,dataSourceIdentifier:W,dataSourceUri:v,dataSourceAdditionalData:H}=o,{value:y,commit:R,highlight:z,i18nRegistry:u,id:G,dataSourcesDataLoader:ut}=t,N=u.translate(t.label),O=!!(W||v),[mt,It]=(0,r.useState)(O),[X,S]=(0,r.useState)(O?[]:Ft(g,a,u)),[pt,Ct]=(0,r.useState)(null);if((0,r.useEffect)(()=>{let e=JSON.stringify({dataSourceIdentifier:W,dataSourceUri:v,dataSourceAdditionalData:H});!O||pt===e||(Ct(e),ut.resolveValue(vt(t),y).then(b=>{if(It(!1),a==="color"){S(nt(b));return}S(b)}))},[W,v,H]),mt)return r.default.createElement(r.default.Fragment,null,r.default.createElement(d.Label,{htmlFor:G},N),r.default.createElement("div",{id:G,className:c(l.wrapper,l.loading),title:u.translate("Beromir.ToggleEditor:Main:loading")},r.default.createElement(d.Icon,{icon:"spinner",size:"lg",spin:!0})));if(X.hidden)return null;if(!X||!X.length)return r.default.createElement(r.default.Fragment,null,r.default.createElement(d.Label,{htmlFor:G},N),r.default.createElement("div",{id:G,className:c(l.wrapper,l.error)},u.translate(`Beromir.ToggleEditor:Main:error.${O?"noDataFromSource":"noNodeTypeDefintion"}`)));let Gt=u.translate("Beromir.ToggleEditor:Main:reset");function F(e,b){if(b&&b.blur(),!e||w&&y===e.value){R("");return}R(e.value)}let L=(e,b=0)=>{if(typeof e=="number"&&e>0)return e;let C=X.length||1;if(!e||typeof e!="string")return C;try{return e=e.replaceAll("{items}",C),b&&(e=e.replaceAll("{maximalColumns}",C)),new Function(`return Math.floor(${e})`)()}catch(m){console.warn('An error occurred while trying to evaluate "'+e+`"
`,m)}},ht=()=>{let e=L(s,p),b=L(p);return{"--columns":Math.min(e,b)}},k=e=>e.icon?r.default.createElement(d.Icon,{icon:e.icon,style:{transform:`rotate(${e.iconRotate||0}deg)`},size:bt}):null,B=e=>u.translate(e.description||e.label),V=e=>w&&y===e.value?Gt:B(e),Y=(e,b=l.allowEmpty)=>w?r.default.createElement("span",{className:c(b,y===e.value&&l.allowEmptyShow)},r.default.createElement(d.Icon,{size:"sm",icon:"times"})):null;return r.default.createElement(r.default.Fragment,null,r.default.createElement(d.Label,{htmlFor:G},N),r.default.createElement("div",{className:c(l.wrapper,l[a],dt&&l.disabled),style:ht()},X.map((e,b)=>{let C=b===0?G:null,m=y===e.value,Z=e.disabled,h=u.translate(e.label);switch(a){case"list":return r.default.createElement("button",{id:C,onClick:({currentTarget:A})=>F(e,A),type:"button",title:B(e),"aria-label":V(e),disabled:Z,className:c(l.listButton,m&&l.selected)},r.default.createElement("span",{className:c(l.radio,m&&z&&l.highlight)},r.default.createElement("span",null)),k(e),it(e,u),h&&r.default.createElement("span",null,h),Y(e,l.allowEmptyRadio));case"color":let At=e.color.length-1;return r.default.createElement("div",{className:l.colorBox},r.default.createElement("button",{id:C,onClick:({currentTarget:A})=>F(e,A),type:"button",title:B(e),"aria-label":V(e),disabled:Z,className:c(l.colorButton,m&&(z?l.highlight:l.selected))},e.color.map((A,J)=>r.default.createElement("span",{key:`color-${J}`,className:c(l.colorPreview,A==="transparent"&&l.colorTransparent,At===J&&l.colorPreviewLast),style:{backgroundColor:A}})),Y(e)),h&&r.default.createElement("span",{className:c(l.label,Z&&l.disabled)},h));default:return r.default.createElement(d.Button,{id:C,onClick:()=>F(e),isActive:m,title:B(e),"aria-label":V(e),disabled:Z,className:c(l.button,m&&z&&l.highlight)},k(e),it(e,u),h&&r.default.createElement("span",{className:c(e.icon||e.preview?l.label:null)},h),Y(e))}})))}st.propTypes={value:i.default.string,commit:i.default.func.isRequired,i18nRegistry:i.default.object.isRequired,options:i.default.shape({layout:i.default.oneOf(["grid","flex","list","color"]),columns:i.default.oneOfType([i.default.string,i.default.number]),maximalColumns:i.default.oneOfType([i.default.string,i.default.number]),allowEmpty:i.default.bool,iconSize:i.default.oneOf(["xs","sm","lg","2x","3x"]),values:i.default.objectOf(i.default.shape({label:i.default.string,icon:i.default.string,iconRotate:i.default.number,description:i.default.string,color:i.default.oneOfType([i.default.string,i.default.arrayOf(i.default.string)]),hidden:i.default.bool,preview:i.default.string,previewFull:i.default.bool,disabled:i.default.bool})),dataSourceIdentifier:i.default.string,dataSourceUri:i.default.string,dataSourceDisableCaching:i.default.bool,dataSourceAdditionalData:i.default.objectOf(i.default.any)}).isRequired};function nt(t){return Array.isArray(t)?(t=t.map(o=>({...o,color:Nt(o.color)})).filter(o=>o.color),t):[]}function Nt(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function it(t,o){if(!t||!t.preview)return null;let a=t.preview,g=t.previewFull?l.imageFull:null,s=o.translate(t.description||t.label);if(a.startsWith("<svg "))return r.default.createElement("div",{className:c(l.imageSVG,g),"aria-label":s,dangerouslySetInnerHTML:{__html:a}});let p=a.startsWith("resource://")?`/_Resources/Static/Packages/${a.substr(11)}`:a;return r.default.createElement("img",{src:p,className:c(l.image,g),alt:s})}function Ft(t,o,a){if(!t||typeof t!="object")return[];let g=[];for(let s in t){let p=t[s];p.hidden||g.push({...p,value:s})}return o==="color"?nt(g):g}var Vt=(0,lt.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),Yt=(0,at.connect)(t=>({focusedNodePath:gt.selectors.CR.Nodes.focusedNodePathSelector(t)})),ct=Vt(Yt(st));Q("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:ct,hasOwnLabel:!0})});})();
//# sourceMappingURL=Plugin.js.map
