(()=>{var ee=Object.create;var At=Object.defineProperty;var re=Object.getOwnPropertyDescriptor;var oe=Object.getOwnPropertyNames;var ie=Object.getPrototypeOf,le=Object.prototype.hasOwnProperty;var ae=(t,e)=>()=>(t&&(e=t(t=0)),e);var j=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var se=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of oe(e))!le.call(t,l)&&l!==r&&At(t,l,{get:()=>e[l],enumerable:!(o=re(e,l))||o.enumerable});return t};var X=(t,e,r)=>(r=t!=null?ee(ie(t)):{},se(e||!t||!t.__esModule?At(r,"default",{value:t,enumerable:!0}):r,t));function v(t){return(...e)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...e);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var k=ae(()=>{});var L=j((Qe,ht)=>{k();ht.exports=v("vendor")().React});var Xt=j((Te,Gt)=>{k();Gt.exports=v("vendor")().PropTypes});var Ot=j((Me,vt)=>{k();vt.exports=v("NeosProjectPackages")().NeosUiReduxStore});var at=j((Ke,Bt)=>{k();Bt.exports=v("NeosProjectPackages")().NeosUiDecorators});var wt=j((_e,Zt)=>{k();Zt.exports=v("vendor")().reactRedux});var st=j((or,Vt)=>{k();Vt.exports=v("NeosProjectPackages")().ReactUiComponents});k();var ne=(t,e="position",r="key")=>{let o=typeof e=="string"?g=>g[e]:e,l={},c={},u={},m={},f={},h={};t.forEach((g,y)=>{let C=g[r]?g[r]:String(y);l[C]=y;let O=o(g),A=String(O||y),J=!1;if(A.startsWith("start")){let b=A.match(/start\s+(\d+)/),p=b&&b[1]?Number(b[1]):0;u[p]||(u[p]=[]),u[p].push(C)}else if(A.startsWith("end")){let b=A.match(/end\s+(\d+)/),p=b&&b[1]?Number(b[1]):0;m[p]||(m[p]=[]),m[p].push(C)}else if(A.startsWith("before")){let b=A.match(/before\s+(\S+)(\s+(\d+))?/);if(!b)J=!0;else{let p=b[1],W=b[3]?Number(b[3]):0;f[p]||(f[p]={}),f[p][W]||(f[p][W]=[]),f[p][W].push(C)}}else if(A.startsWith("after")){let b=A.match(/after\s+(\S+)(\s+(\d+))?/);if(!b)J=!0;else{let p=b[1],W=b[3]?Number(b[3]):0;h[p]||(h[p]={}),h[p][W]||(h[p][W]=[]),h[p][W].push(C)}}else J=!0;if(J){let b=parseFloat(A);(isNaN(b)||!isFinite(b))&&(b=y),c[b]||(c[b]=[]),c[b].push(C)}});let F=[],V=[],Z=[],N=[],G=(g,y)=>{let C=Object.keys(g).map(O=>Number(O)).sort((O,A)=>O-A);return y?C:C.reverse()},w=(g,y)=>{g.forEach(C=>{if(!(N.indexOf(C)>=0)){if(N.push(C),f[C]){let O=G(f[C],!0);for(let A of O)w(f[C][A],y)}if(y.push(C),h[C]){let O=G(h[C],!1);for(let A of O)w(h[C][A],y)}}})};for(let g of G(u,!1))w(u[g],F);for(let g of G(c,!0))w(c[g],V);for(let g of G(m,!0))w(m[g],Z);for(let g of Object.keys(f))if(!(N.indexOf(g)>=0))for(let y of G(f[g],!1))w(f[g][y],F);for(let g of Object.keys(h))if(!(N.indexOf(g)>=0))for(let y of G(h[g],!1))w(h[g][y],V);return[...F,...V,...Z].map(g=>l[g]).map(g=>t[g])},bt=ne;var yt=v("manifest");var s=X(L()),n=X(Xt()),Rt=X(Ot()),jt=X(at());var Qt=X(wt());var H=X(L());var Y=X(L());function Wt({style:t,className:e,size:r=30}){return Y.default.createElement("svg",{width:r,height:r,stroke:"currentColor",viewBox:"0 0 24 24",style:t,className:e},Y.default.createElement("g",null,Y.default.createElement("circle",{cx:"12",cy:"12",r:"9.5",fill:"none","stroke-width":"2","stroke-linecap":"round"},[{attribute:"dasharray",values:"0 150;42 150;42 150;42 150"},{attribute:"dashoffset",values:"0;-16;-59;-59"}].map(({attribute:o,values:l})=>Y.default.createElement("animate",{key:o,attributeName:`stroke-${o}`,values:l,dur:"1.5s",calcMode:"spline",keyTimes:"0;0.475;0.95;1",keySplines:"0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1",repeatCount:"indefinite"}))),Y.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"2s",values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}function Ft({style:t,className:e,size:r=30}){return Y.default.createElement("svg",{width:r*2,height:r,viewBox:"0 0 24 12",class:e,style:t},[1,2,3].map(o=>{let l=o*6,c=Math.round(100/3*(o-1))/100;return Y.default.createElement("circle",{cx:l,cy:"6",r:"0",fill:"currentColor"},Y.default.createElement("animate",{attributeName:"r",begin:c,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"}))}))}var zt=X(at()),ut={container:(t=1)=>({display:"grid",gridTemplate:"'content' 1fr / 1fr",alignItems:"center",justifyItems:"center",width:"100%",minHeight:`calc(var(--spacing-GoldenUnit) * ${t})`}),item:(t=!1)=>({gridArea:"content",transition:"opacity var(--transition-Default), transform var(--transition-Default) ease",opacity:t?1:0,transform:`scale(${t?1:0})`})};function ce({id:t,title:e="Neos.Neos:Main:loading",isLoading:r=!1,delayTime:o=500,timeoutTime:l=5e3,i18nRegistry:c,heightMultiplier:u=1}){let[m,f]=(0,H.useState)(0),h=e?c.translate(e):null;return(0,H.useEffect)(()=>{if(!r){f(0);return}let F=setTimeout(()=>{f(1)},o),V=setTimeout(()=>{f(2)},o+l);return()=>{clearTimeout(F),clearTimeout(V)}},[r]),r?H.default.createElement("div",{id:t,style:ut.container(u),title:h},H.default.createElement(Wt,{style:ut.item(m==1)}),H.default.createElement(Ft,{style:ut.item(m==2)})):null}var de=(0,zt.neos)(t=>({i18nRegistry:t.get("i18n")})),Yt=de(ce);var S=X(st());var Q=X(L()),$=X(st());var a={radio:"beromir-toggleeditor-blateq-radio",color:"beromir-toggleeditor-blateq-color",colorButton:"beromir-toggleeditor-blateq-colorButton",grid:"beromir-toggleeditor-blateq-grid",image:"beromir-toggleeditor-blateq-image","flex-start":"beromir-toggleeditor-blateq-flex-start",content:"beromir-toggleeditor-blateq-content",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",colorBox:"beromir-toggleeditor-blateq-colorBox",imageFull:"beromir-toggleeditor-blateq-imageFull",flex:"beromir-toggleeditor-blateq-flex",transition:"beromir-toggleeditor-blateq-transition",selected:"beromir-toggleeditor-blateq-selected",colorPreviewLast:"beromir-toggleeditor-blateq-colorPreviewLast",layered:"beromir-toggleeditor-blateq-layered",list:"beromir-toggleeditor-blateq-list",imageSVG:"beromir-toggleeditor-blateq-imageSVG",listButton:"beromir-toggleeditor-blateq-listButton",flex1:"beromir-toggleeditor-blateq-flex1",label:"beromir-toggleeditor-blateq-label",disabled:"beromir-toggleeditor-blateq-disabled",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",colorPreview:"beromir-toggleeditor-blateq-colorPreview",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",highlight:"beromir-toggleeditor-blateq-highlight",wrapper:"beromir-toggleeditor-blateq-wrapper",error:"beromir-toggleeditor-blateq-error",button:"beromir-toggleeditor-blateq-button"};function Nt(t){var e,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(r=Nt(t[e]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function be(){for(var t,e,r=0,o="",l=arguments.length;r<l;r++)(t=arguments[r])&&(e=Nt(t))&&(o&&(o+=" "),o+=e);return o}var B=be;var kt=t=>St("preview",t),Lt=t=>St("icon",t);function q(t,e,r=!1,o=c=>c,l=""){let c=`${e}Active${l}`,u=t[e+l],m=t[c];return r&&m===void 0&&(m=u),u==null&&m==null?null:{default:o(u),active:o(m)}}function Ht(t,e){if(!t||typeof t!="object")return[];let r=[];for(let o in t){let l=t[o];l.hidden||r.push({...l,value:o,key:o==""?"__empty__":o})}return e==="color"?mt(r):r}function mt(t){return Array.isArray(t)?(t=t.map(e=>({...e,color:ue(e.color)})).filter(e=>e.color),t):[]}function ue(t){return!t||typeof t!="string"&&!Array.isArray(t)?null:typeof t=="string"?[t]:(t=t.filter(Boolean),t.length<1?null:t)}function St(t,e){if(!e)return null;let r=q(e,t);if(!r)return null;let o=r.default&&r.active,l=q(e,t,!0,m=>`rotate(${m||0}deg)`,"Rotate"),c=q("label",t,!0),u=q("description",!0);return{type:t,needLayering:o,state:r,label:c,description:u,rotate:l}}function U({item:t,size:e,isCurrent:r}){let o=Lt(t);if(!o)return null;let{state:l,rotate:c,needLayering:u}=o;return u?Q.default.createElement("span",{className:a.layered},Q.default.createElement($.Icon,{icon:l.default,className:a.transition,style:{opacity:r?0:1,transform:c?.default},size:e}),Q.default.createElement($.Icon,{icon:l.active,className:a.transition,style:{opacity:r?1:0,transform:c?.active},size:e})):l.default?Q.default.createElement($.Icon,{icon:l.default,className:a.transition,style:{transform:r?c?.active:c?.default},size:e}):l.active&&r?Q.default.createElement($.Icon,{icon:l.active,style:{transform:c?.active},size:e}):null}var T=X(L());var pt=X(L()),Jt=X(at());var me=(0,Jt.neos)(t=>({i18nRegistry:t.get("i18n")})),tt=me(pe);function pe({src:t,className:e,style:r,label:o,i18nRegistry:l}){let c=l.translate(o);return t.startsWith("<svg ")?pt.default.createElement("div",{className:B(r.imageSVG,e),style:r,"aria-label":c,dangerouslySetInnerHTML:{__html:t}}):pt.default.createElement("img",{className:B(r.image,e),style:r,alt:c,src:t.startsWith("resource://")?`/_Resources/Static/Packages/${t.substr(11)}`:t})}function D({item:t,isCurrent:e}){let r=kt(t);if(!r)return null;let{state:o,rotate:l,needLayering:c,label:u,description:m}=r,f=t.previewFull?a.imageFull:null;return r.needLayering?T.default.createElement("span",{className:a.layered},T.default.createElement(tt,{src:o.default,className:[a.transition,f],style:{opacity:e?0:1,transform:l?.default},label:m?.default||u?.default}),T.default.createElement(tt,{src:o.active,className:[a.transition,f],style:{opacity:e?1:0,transform:l?.active},label:m?.active||u?.active})):o.default?T.default.createElement(tt,{src:o.default,className:[a.transition,f],style:{transform:e?l?.active:l?.default},label:m?.default||u?.default}):o.active&&e?T.default.createElement(tt,{src:o.active,className:[a.transition,f],style:{transform:l?.active},label:m?.active||u?.active}):null}var et=X(L()),qt=X(st());function M({children:t,label:e,id:r,className:o,title:l,style:c,renderHelpIcon:u}){return t?et.default.createElement(et.default.Fragment,null,e&&et.default.createElement(qt.Label,{htmlFor:r},e," ",u()),et.default.createElement("div",{id:r,className:B(a.wrapper,o),style:c,title:l},t)):null}var Ie=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),fe={layout:"grid",maximalColumns:4,values:{},columns:null,allowEmpty:!1,emptyValue:"",multiple:!1,iconSize:null,disabled:!1,hidden:!1,dataSourceIdentifier:null,dataSourceUri:null};function Ut(t){let e={...fe,...t.options},{layout:r,values:o,columns:l,maximalColumns:c,emptyValue:u,iconSize:m,disabled:f,dataSourceIdentifier:h,dataSourceUri:F,dataSourceAdditionalData:V,multiple:Z}=e,N=Z||e.allowEmpty,{value:G,commit:w,highlight:nt,i18nRegistry:g,id:y,dataSourcesDataLoader:C,renderHelpIcon:O}=t,A=g.translate(t.label),[J,b]=(0,s.useState)([]);(0,s.useEffect)(()=>{nt||b(Array.isArray(G)?G:[G])},[nt]),Z&&!Array.isArray(G)&&console.warn(`Misconfiguration in property "${t.identifier}". Multiple is activated but value type seems to be "string" but should be "array".`);let p=!!(h||F),[W,Dt]=(0,s.useState)(p),[E,gt]=(0,s.useState)(p?[]:Ht(o,r,g)),[rt,It]=(0,s.useState)(Array.isArray(G)?G:[G]),[Mt,Et]=(0,s.useState)(null);if((0,s.useEffect)(()=>{let i=JSON.stringify({dataSourceIdentifier:h,dataSourceUri:F,dataSourceAdditionalData:V});!p||Mt===i||(Et(i),C.resolveValue(Ie(t),G).then(I=>{if(Dt(!1),I.hidden){gt({hidden:!0});return}if(I=I.map(d=>({key:d.value==""?"__empty__":d.value,...d})),r==="color"){gt(mt(I));return}gt(I)}))},[h,F,V]),W)return s.default.createElement(M,{id:y,label:A,renderHelpIcon:O},s.default.createElement(Yt,{isLoading:W,title:"Beromir.ToggleEditor:Main:loading"}));if(E.hidden)return null;if(!E||!E.length)return s.default.createElement(M,{id:y,label:A,className:a.error,renderHelpIcon:O},g.translate(`Beromir.ToggleEditor:Main:error.${p?"noDataFromSource":"noNodeTypeDefintion"}`));function Kt(i){if(JSON.stringify(rt)===JSON.stringify(J))return!1;let I=J.includes(i.value);if(!rt.length)return I;let d=ct(i);return Z?d&&!I||I&&!d:d}function ct(i){return rt.includes(i.value)}function ot(i,I){if(I&&I.blur(),!i){w(Z?[]:u),It([]);return}let d=i.value,x=[...rt],K=x.includes(d);Z?K?x.splice(x.indexOf(d),1):x.push(d):x=K?[]:[d],!(!N&&x.length===0)&&(It(x),Z||(x=x[0]||u),w(x))}let ft=(i,I=0)=>{if(typeof i=="number"&&i>0)return i;let d=E.length||1;if(!i||typeof i!="string")return d;try{return i=i.replaceAll("{items}",d),I&&(i=i.replaceAll("{maximalColumns}",d)),new Function(`return Math.floor(${i})`)()}catch(x){console.warn('An error occurred while trying to evaluate "'+i+`"
`,x)}},Pt=()=>{let i=ft(l,c),I=ft(c);return{"--columns":Math.min(i,I)}},_t=g.translate("Beromir.ToggleEditor:Main:reset"),dt=({item:i,className:I=a.allowEmpty})=>N&&!Z?s.default.createElement("span",{className:B(I,ct(i)&&a.allowEmptyShow)},s.default.createElement(S.Icon,{size:"sm",icon:"times"})):null;return s.default.createElement(M,{id:y,label:A,className:[a[r],f&&a.disabled],style:Pt(),renderHelpIcon:O},bt(E).map((i,I)=>{let d=ct(i),x=i.disabled,K=d?"active":"default",$t=q(i,"label",!0,_=>g.translate(_)),te=q(i,"description",!0,_=>g.translate(_)),z=$t?.[K],P=te?.[K]||z,it=d&&N?_t:P,lt=Kt(i)&&a.highlight;switch(r){case"list":return Z?s.default.createElement(S.Label,{className:B(a.listButton,lt),title:P,"aria-label":it,key:I},s.default.createElement(S.CheckBox,{isChecked:d,disabled:x,onChange:()=>ot(i)}),s.default.createElement(U,{item:i,isCurrent:d,size:m}),s.default.createElement(D,{item:i,isCurrent:d}),z&&s.default.createElement("span",{className:a.flex1},z)):s.default.createElement("button",{onClick:({currentTarget:R})=>ot(i,R),type:"button",title:P,"aria-label":it,disabled:x,className:B(a.listButton,d&&a.selected,lt),key:I},s.default.createElement("span",{className:a.radio},s.default.createElement("span",null)),s.default.createElement(U,{item:i,isCurrent:d,size:m}),s.default.createElement(D,{item:i,isCurrent:d}),z&&s.default.createElement("span",{className:a.flex1},z),s.default.createElement(dt,{item:i,className:a.allowEmptyRadio}));case"color":let _=i.color.length-1;return s.default.createElement("div",{className:a.colorBox,key:I},s.default.createElement("button",{onClick:({currentTarget:R})=>ot(i,R),type:"button",title:P,"aria-label":it,disabled:x,className:B(a.colorButton,d&&a.selected,lt)},i.color.map((R,Ct)=>s.default.createElement("span",{key:`color-${Ct}`,className:B(a.colorPreview,R==="transparent"&&a.colorTransparent,_===Ct&&a.colorPreviewLast),style:{backgroundColor:R}})),s.default.createElement(dt,{item:i})),z&&s.default.createElement("span",{className:B(a.label,x&&a.disabled)},z));default:return s.default.createElement(S.Button,{onClick:()=>ot(i),isActive:d,title:P,"aria-label":it,disabled:x,className:B(a.button,lt),key:I},s.default.createElement(U,{item:i,isCurrent:d,size:m}),s.default.createElement(D,{item:i,isCurrent:d}),z&&s.default.createElement("span",{className:B(i.icon||i.preview?a.label:null)},z),s.default.createElement(dt,{item:i}))}}))}Ut.propTypes={value:n.default.string,commit:n.default.func.isRequired,i18nRegistry:n.default.object.isRequired,options:n.default.shape({layout:n.default.oneOf(["grid","flex","flex-start","list","color"]),columns:n.default.oneOfType([n.default.string,n.default.number]),maximalColumns:n.default.oneOfType([n.default.string,n.default.number]),allowEmpty:n.default.bool,emptyValue:n.default.string,multiple:n.default.bool,iconSize:n.default.oneOf(["xs","sm","lg","2x","3x"]),values:n.default.objectOf(n.default.shape({label:n.default.string,icon:n.default.string,iconRotate:n.default.number,description:n.default.string,color:n.default.oneOfType([n.default.string,n.default.arrayOf(n.default.string)]),hidden:n.default.bool,preview:n.default.string,previewFull:n.default.bool,disabled:n.default.bool})),dataSourceIdentifier:n.default.string,dataSourceUri:n.default.string,dataSourceDisableCaching:n.default.bool,dataSourceAdditionalData:n.default.objectOf(n.default.any)}).isRequired};var Ce=(0,jt.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),Ae=(0,Qt.connect)(t=>({focusedNodePath:Rt.selectors.CR.Nodes.focusedNodePathSelector(t)})),Tt=Ce(Ae(Ut));yt("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:Tt,hasOwnLabel:!0})});})();
//# sourceMappingURL=Plugin.js.map
