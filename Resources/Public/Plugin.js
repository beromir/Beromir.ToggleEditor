(()=>{var at=Object.create;var w=Object.defineProperty;var st=Object.getOwnPropertyDescriptor;var nt=Object.getOwnPropertyNames;var ct=Object.getPrototypeOf,bt=Object.prototype.hasOwnProperty;var dt=(t,e)=>()=>(t&&(e=t(t=0)),e);var m=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ut=(t,e,l,g)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of nt(e))!bt.call(t,s)&&s!==l&&w(t,s,{get:()=>e[s],enumerable:!(g=st(e,s))||g.enumerable});return t};var I=(t,e,l)=>(l=t!=null?at(ct(t)):{},ut(e||!t||!t.__esModule?w(l,"default",{value:t,enumerable:!0}):l,t));function n(t){return(...e)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${t}`])return window["@Neos:HostPluginAPI"][`@${t}`](...e);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var d=dt(()=>{});var Y=m((Tt,F)=>{d();F.exports=n("vendor")().React});var S=m((Qt,N)=>{d();N.exports=n("vendor")().PropTypes});var R=m((Mt,H)=>{d();H.exports=n("NeosProjectPackages")().ReactUiComponents});var k=m((Pt,q)=>{d();q.exports=n("NeosProjectPackages")().NeosUiDecorators});var D=m((re,L)=>{d();L.exports=n("vendor")().reactRedux});var j=m((le,J)=>{d();J.exports=n("NeosProjectPackages")().NeosUiReduxStore});d();var V=n("manifest");var a=I(Y()),i=I(S()),p=I(R()),Q=I(k());var r={flex:"beromir-toggleeditor-blateq-flex",colorButton:"beromir-toggleeditor-blateq-colorButton",selected:"beromir-toggleeditor-blateq-selected",button:"beromir-toggleeditor-blateq-button",image:"beromir-toggleeditor-blateq-image",disabled:"beromir-toggleeditor-blateq-disabled",list:"beromir-toggleeditor-blateq-list",wrapper:"beromir-toggleeditor-blateq-wrapper",colorTransparent:"beromir-toggleeditor-blateq-colorTransparent",grid:"beromir-toggleeditor-blateq-grid",loading:"beromir-toggleeditor-blateq-loading",allowEmptyRadio:"beromir-toggleeditor-blateq-allowEmptyRadio",listButton:"beromir-toggleeditor-blateq-listButton",error:"beromir-toggleeditor-blateq-error",highlight:"beromir-toggleeditor-blateq-highlight",label:"beromir-toggleeditor-blateq-label",radio:"beromir-toggleeditor-blateq-radio",imageFull:"beromir-toggleeditor-blateq-imageFull",allowEmpty:"beromir-toggleeditor-blateq-allowEmpty",color:"beromir-toggleeditor-blateq-color",imageSVG:"beromir-toggleeditor-blateq-imageSVG",allowEmptyShow:"beromir-toggleeditor-blateq-allowEmptyShow",colorBox:"beromir-toggleeditor-blateq-colorBox"};var E=I(D()),M=I(j());function T(t){var e,l,g="";if(typeof t=="string"||typeof t=="number")g+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(l=T(t[e]))&&(g&&(g+=" "),g+=l)}else for(l in t)t[l]&&(g&&(g+=" "),g+=l);return g}function It(){for(var t,e,l=0,g="",s=arguments.length;l<s;l++)(t=arguments[l])&&(e=T(t))&&(g&&(g+=" "),g+=e);return g}var c=It;var pt=t=>({contextNodePath:t.focusedNodePath,dataSourceIdentifier:t.options.dataSourceIdentifier,dataSourceUri:t.options.dataSourceUri,dataSourceAdditionalData:t.options.dataSourceAdditionalData,dataSourceDisableCaching:!!t.options.dataSourceDisableCaching}),Ct={layout:"grid",values:{},columns:null,allowEmpty:!1,iconSize:null,disabled:!1,dataSourceIdentifier:null,dataSourceUri:null};function K(t){let e={...Ct,...t.options},{layout:l,values:g,columns:s,allowEmpty:x,iconSize:_,disabled:$,dataSourceIdentifier:tt,dataSourceUri:et}=e,{value:C,commit:v,highlight:X,i18nRegistry:A,dataSourcesDataLoader:ot}=t,h=!!(tt||et),[rt,it]=(0,a.useState)(h),[G,lt]=(0,a.useState)(h?[]:At(g,A));if((0,a.useEffect)(()=>{h&&ot.resolveValue(pt(t),C).then(o=>{it(!1),lt(o)})},[e]),rt)return a.default.createElement("div",{className:c(r.wrapper,r.loading),title:A.translate("Beromir.ToggleEditor:Main:loading")},a.default.createElement(p.Icon,{icon:"spinner",size:"lg",spin:!0}));if(!G||!G.length)return a.default.createElement("div",{className:c(r.wrapper,r.error)},A.translate(`Beromir.ToggleEditor:Main:error.${h?"noDataFromSource":"noNodeTypeDefintion"}`));let gt=A.translate("Beromir.ToggleEditor:Main:reset");function y(o,b){if(b&&b.blur(),!o||x&&C===o.value){v("");return}v(o.value)}let W=o=>o.icon?a.default.createElement(p.Icon,{icon:o.icon,style:{transform:`rotate(${o.iconRotate||0}deg)`},size:_}):null,B=o=>x&&C===o.value?gt:o.description||o.label,O=(o,b=r.allowEmpty)=>x?a.default.createElement("div",{className:c(b,C===o.value&&r.allowEmptyShow)},a.default.createElement(p.Icon,{size:"sm",icon:"times"})):null;return a.default.createElement("div",{className:c(r.wrapper,r[l],$&&r.disabled),style:{"--columns":s||G.length||1}},G.map(o=>{let b=C===o.value,{label:u,disabled:f}=o;switch(l){case"list":return a.default.createElement("button",{onClick:({currentTarget:Z})=>y(o,Z),type:"button",title:B(o),disabled:f,className:c(r.listButton,b&&r.selected)},a.default.createElement("span",{className:c(r.radio,b&&X&&r.highlight)},a.default.createElement("span",null)),W(o),U(o),u&&a.default.createElement("span",null,u),O(o,r.allowEmptyRadio));case"color":return a.default.createElement("div",{className:r.colorBox},a.default.createElement("button",{onClick:({currentTarget:Z})=>y(o,Z),type:"button",title:B(o),disabled:f,className:c(r.colorButton,b&&(X?r.highlight:r.selected),o.color==="transparent"&&r.colorTransparent),style:{backgroundColor:o.color}},O(o)),u&&a.default.createElement("span",{className:c(r.label,f&&r.disabled)},u));default:return a.default.createElement(p.Button,{onClick:()=>y(o),isActive:b,title:B(o),disabled:f,className:c(r.button,b&&X&&r.highlight)},W(o),U(o),u&&a.default.createElement("span",{className:c(o.icon||o.preview?r.label:null)},u),O(o))}}))}K.propTypes={value:i.default.string,commit:i.default.func.isRequired,i18nRegistry:i.default.object.isRequired,options:i.default.shape({layout:i.default.oneOf(["grid","flex","list","color"]),columns:i.default.number,allowEmpty:i.default.bool,iconSize:i.default.oneOf(["xs","sm","lg","2x","3x"]),values:i.default.objectOf(i.default.shape({label:i.default.string,icon:i.default.string,iconRotate:i.default.number,description:i.default.string,color:i.default.string,hidden:i.default.bool,preview:i.default.string,previewFull:i.default.bool,disabled:i.default.bool})),dataSourceIdentifier:i.default.string,dataSourceUri:i.default.string,dataSourceDisableCaching:i.default.bool,dataSourceAdditionalData:i.default.objectOf(i.default.any)}).isRequired};function U(t){if(!t||!t.preview)return null;let e=t.preview,l=t.previewFull?r.imageFull:null,g=t.description||t.label;if(e.startsWith("<svg "))return a.default.createElement("div",{className:c(r.imageSVG,l),"aria-label":g,dangerouslySetInnerHTML:{__html:e}});let s=e.startsWith("resource://")?`/_Resources/Static/Packages/${e.substr(11)}`:e;return a.default.createElement("img",{src:s,className:c(r.image,l),alt:g})}function At(t,e){if(!t||typeof t!="object")return[];let l=[];for(let g in t){let s=t[g];s.hidden||l.push({...s,label:e.translate(s.label),description:e.translate(s.description),value:g})}return l}var ht=(0,Q.neos)(t=>({i18nRegistry:t.get("i18n"),dataSourcesDataLoader:t.get("dataLoaders").get("DataSources")})),Gt=(0,E.connect)(t=>({focusedNodePath:M.selectors.CR.Nodes.focusedNodePathSelector(t)})),P=ht(Gt(K));V("Beromir.ToggleEditor:Editor",{},t=>{t.get("inspector").get("editors").set("Beromir.ToggleEditor/Editor",{component:P})});})();
//# sourceMappingURL=Plugin.js.map
